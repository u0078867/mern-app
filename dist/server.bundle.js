!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={},r={0:0};return t.e=function(t){if(0!==r[t]){var n=require("./"+t+".server.bundle.js"),o=n.modules,u=n.ids;for(var i in o)e[i]=o[i];for(var a=0;a<u.length;a++)r[u[a]]=0}return Promise.resolve()},t.m=e,t.c=n,t.p="",t.oe=function(e){throw console.error(e),e},t.oe=function(e){process.nextTick(function(){throw e})},t(t.s=86)}([function(e,t){e.exports=require("express")},function(e,t){e.exports=require("react")},function(e,t){e.exports=require("mongoose")},function(e,t){e.exports=require("cuid")},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={mongoURL:process.env.MONGO_URL||"mongodb://localhost:27017/mern-starter",port:process.env.PORT||8e3,workDir:process.env.WORK_DIR||"./upload",prefillDb:parseInt(process.env.PREFILL_DB)||1,schemasDir:process.env.SCHEMAS_DIR||"./examples/sample_schemas"};t["default"]=n},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("react-intl")},function(e,t){e.exports=require("react-redux")},function(e,t){e.exports=require("react-router")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),u=r(o),i=n(3),a=r(i),s=n(4),l=r(s),c=n(11),d=r(c),f=n(5),p=(r(f),n(6)),m=r(p),v=u["default"].Schema;"Subject"in u["default"].connection.models&&delete u["default"].connection.models.Subject;var h=JSON.parse(m["default"].readFileSync(l["default"].schemasDir+"/subject.json")),b=(0,d["default"])(void 0,h);b=Object.assign(b,{slug:{type:"String",required:!0},cuid:{type:"String","default":a["default"],required:!0,index:!0},date_added:{type:"Date","default":Date.now,required:!0}});var y=new v(b,{strict:!1});y.statics.getJSONSchema=function(){return h},y.index({"$**":"text"}),t["default"]=u["default"].model("Subject",y)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){t.$schema="http://json-schema.org/draft-04/schema#";var n=(0,i["default"])(e,t);return n}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var u=n(103),i=r(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"get",n=arguments[2];return(0,a["default"])(c+"/"+e,{headers:{"content-type":"application/json"},method:t,body:JSON.stringify(n)}).then(function(e){return e.json().then(function(t){return{json:t,response:e}})}).then(function(e){var t=e.json,n=e.response;return n.ok?t:Promise.reject(t)})}function u(e){var t=new FormData;return t.append("file",e),(0,a["default"])(c+"/upload/file",{method:"POST",body:t}).then(function(e){return e.json().then(function(t){return{json:t,response:e}})}).then(function(e){var t=e.json,n=e.response;return n.ok?t:Promise.reject(t)})}Object.defineProperty(t,"__esModule",{value:!0}),t.API_URL=void 0,t["default"]=o,t.uploadFile=u;var i=n(50),a=r(i),s=n(4),l=r(s),c=t.API_URL="undefined"==typeof window?process.env.BASE_URL||"http://localhost:"+(process.env.PORT||l["default"].port)+"/api":"/api"},function(e,t){e.exports=require("pubsub-js")},function(e,t){e.exports=require("react-helmet")},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),u=r(o),i=n(3),a=r(i),s=n(6),l=r(s),c=n(5),d=r(c),f=u["default"].Schema;f.ObjectId;"Activity"in u["default"].connection.models&&delete u["default"].connection.models.Activity;var p=new f({name:{type:"String",required:!0,index:!0},researchers:[{id:{type:"String",required:!0,index:!0},_id:!1}],subjects:[{id:{type:"String",required:!0,index:!0},_id:!1}],devices:[{id:{type:"String",required:!0,index:!0},_id:!1}],software:[{id:{type:"String",required:!0,index:!0},_id:!1}],other_resources:[{id:{type:"String",required:!0,index:!0},_id:!1}],outputs:[{_id:!1,cuid:{type:"String","default":a["default"],required:!0,index:!0},name:{type:"String",required:!0,index:!0},uri:{type:"String",required:!1,index:!0},metadata:[{name:{type:"String",required:!0},value:{type:"Mixed",required:!0,index:!0},uom:{type:"String"},_id:!1}]}],slug:{type:"String",required:!0},cuid:{type:"String","default":a["default"],required:!0,index:!0},date_added:{type:"Date","default":Date.now,required:!0}},{strict:!1,toObject:{virtuals:!0}});p.virtual("activity.subjects",{ref:"Subject",localField:"activity.subjects.id",foreignField:"cuid",justOne:!0}),p.virtual("activity.prev.subject",{ref:"Subject",localField:"activity.prev.subjects.id",foreignField:"cuid",justOne:!0});var m=JSON.parse(l["default"].readFileSync(d["default"].join(e,"./activity.json")));p.statics.getJSONSchema=function(){return m},p.index({"$**":"text"}),t["default"]=u["default"].model("Activity",p)}).call(t,"server\\app\\models")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),u=r(o),i=n(3),a=r(i),s=n(4),l=r(s),c=n(11),d=r(c),f=n(5),p=(r(f),n(6)),m=r(p),v=u["default"].Schema;"Device"in u["default"].connection.models&&delete u["default"].connection.models.Device;var h=JSON.parse(m["default"].readFileSync(l["default"].schemasDir+"/device.json")),b=(0,d["default"])(void 0,h);b=Object.assign(b,{slug:{type:"String",required:!0},cuid:{type:"String","default":a["default"],required:!0,index:!0},date_added:{type:"Date","default":Date.now,required:!0}});var y=new v(b,{strict:!1});y.statics.getJSONSchema=function(){return h},y.index({"$**":"text"}),t["default"]=u["default"].model("Device",y)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),u=r(o),i=n(3),a=r(i),s=n(4),l=r(s),c=n(11),d=r(c),f=n(5),p=(r(f),n(6)),m=r(p),v=u["default"].Schema;"Researcher"in u["default"].connection.models&&delete u["default"].connection.models.Researcher;var h=JSON.parse(m["default"].readFileSync(l["default"].schemasDir+"/researcher.json")),b=(0,d["default"])(void 0,h);b=Object.assign(b,{slug:{type:"String",required:!0},cuid:{type:"String","default":a["default"],required:!0,index:!0},date_added:{type:"Date","default":Date.now,required:!0}});var y=new v(b,{strict:!1});y.statics.getJSONSchema=function(){return h},y.index({"$**":"text"}),t["default"]=u["default"].model("Researcher",y)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),u=r(o),i=n(3),a=r(i),s=n(4),l=r(s),c=n(11),d=r(c),f=n(5),p=(r(f),n(6)),m=r(p),v=u["default"].Schema;"SWTool"in u["default"].connection.models&&delete u["default"].connection.models.SWTool;var h=JSON.parse(m["default"].readFileSync(l["default"].schemasDir+"/software.json")),b=(0,d["default"])(void 0,h);b=Object.assign(b,{slug:{type:"String",required:!0},cuid:{type:"String","default":a["default"],required:!0,index:!0},date_added:{type:"Date","default":Date.now,required:!0}});var y=new v(b,{strict:!1});y.statics.getJSONSchema=function(){return h},y.index({"$**":"text"}),t["default"]=u["default"].model("SWTool",y)},function(e,t){e.exports=require("limax")},function(e,t){e.exports=require("sanitize-html")},function(e,t){e.exports=require("react-dom/server")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.keys(e).reduce(function(n,r){var u=e[r],i=t?t+"."+r:r;return"string"==typeof u?n[i]=u:Object.assign(n,o(u,i)),n},{})}Object.defineProperty(t,"__esModule",{value:!0}),t.localizationData=t.enabledLanguages=void 0;var u=n(7),i=n(99),a=r(i),s=n(100),l=r(s);n(101);var c=n(106),d=r(c),f=n(55),p=r(f);n(102);var m=n(107),v=r(m),h=n(56),b=r(h),y=t.enabledLanguages=["en"],g=t.localizationData={};global.Intl?(0,l["default"])(y)||(global.Intl.NumberFormat=a["default"].NumberFormat,global.Intl.DateTimeFormat=a["default"].DateTimeFormat):global.Intl=a["default"],(0,u.addLocaleData)(d["default"]),g.en=p["default"],g.en.messages=o(g.en.messages),(0,u.addLocaleData)(v["default"]),g.fr=b["default"],g.fr.messages=o(g.fr.messages)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var u=t&&t.defaultProps,i=arguments.length-3;if(n||0===i||(n={}),n&&u)for(var a in u)void 0===n[a]&&(n[a]=u[a]);else n||(n=u||{});if(1===i)n.children=o;else if(i>1){for(var s=Array(i),l=0;l<i;l++)s[l]=arguments[l+3];n.children=s}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),d=n(13),f=r(d),p="",m={},v=!0,h=1e3,b=10,y=!0,g=!1,_=a("b",{},void 0,"Buffer size:"),w=a("b",{},void 0,"Current buffered frames:"),S=a("b",{},void 0,"Single package digest interval (ms):"),j=a("b",{},void 0,"Content:"),O=a("b",{},void 0,a("i",{},void 0,"--In-port--")),M=a("b",{},void 0,"Port"),P=a("b",{},void 0,"Buffered:"),x=function(e){function t(e){o(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={bufferLength:0},n.digestSinglePackage=n.digestSinglePackage.bind(n),n.handleNewPackage=n.handleNewPackage.bind(n),n.buffer=[],n.digestLoop=null,n._isMounted=!1,n}return i(t,e),s(t,[{key:"render",value:function(){var e=void 0;this.props.buffered&&(e=a("div",{},void 0,a("div",{},void 0,_," ",this.props.maxBufferSize),a("div",{},void 0,w," ",this.state.bufferLength),a("div",{},void 0,S," ",this.props.digestInterval)));var t=void 0;return this.props.showContent&&(t=a("div",{},void 0,a("div",{},void 0,j," ",JSON.stringify(this.props.data.data)))),a("div",{},void 0,O,a("div",{},void 0,M," ",this.props.port),a("div",{},void 0,P," ",this.props.buffered?"true":"false"),e,t)}},{key:"componentDidMount",value:function(){this.props.buffered&&(this.digestLoop=setInterval(this.digestSinglePackage,this.props.digestInterval)),this._isMounted=!0}},{key:"componentWillUpdate",value:function(e,t){}},{key:"componentWillUnmount",value:function(){this.props.buffered&&clearInterval(this.digestLoop),this._isMounted=!1}},{key:"componentWillReceiveProps",value:function(e){0!=Object.keys(e.data).length&&(this.props.data!=e.data&&this.handleNewPackage(e.data,e.port,e.buffered,e.maxBufferSize,e.send),e.buffered!=this.props.buffered&&(e.buffered?this.digestLoop=setInterval(this.digestSinglePackage,e.digestInterval):(clearInterval(this.digestLoop),this.buffer=[])),e.digestInterval!=this.props.digestInterval&&e.buffered&&this.props.buffered&&(clearInterval(this.digestLoop),this.digestLoop=setInterval(this.digestSinglePackage,e.digestInterval)))}},{key:"handleNewPackage",value:function(e,t,n,r,o){if(n)for(var u=0;u<e.data.length;u++)this.buffer.push(e.data[u]),this.buffer.length>r&&this.buffer.shift(),this.setState({bufferLength:this.buffer.length});else""!=t&&o&&f["default"].publishSync(t,e.data)}},{key:"digestSinglePackage",value:function(){if(""!=this.props.port){if(0==this.buffer.length)return;var e=this.buffer.shift();this.setState({bufferLength:this.buffer.length}),this.props.send&&f["default"].publishSync(this.props.port,[e])}}}]),t}(c["default"].Component);x.defaultProps={port:p,data:m,buffered:v,maxBufferSize:h,digestInterval:b,send:y,showContent:g},t["default"]=x},function(e,t,n){"use strict";function r(e){return o({type:i},u.localizationData[e])}Object.defineProperty(t,"__esModule",{value:!0}),t.SWITCH_LANGUAGE=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.switchLanguage=r;var u=n(22),i=t.SWITCH_LANGUAGE="SWITCH_LANGUAGE"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),u=r(o),i=n(3),a=r(i),s=u["default"].Schema;"Form"in u["default"].connection.models&&delete u["default"].connection.models.Form;var l=new s({title:{type:"String",required:!0},json_schema:{type:"Mixed",required:!0},ui_schema:{type:"Mixed",required:!0},init_data:{type:"Mixed",required:!0},dest_collection:{type:"String",required:!0},insert_on_submit:{type:"Boolean",required:!0},slug:{type:"String",required:!0},cuid:{type:"String","default":a["default"],required:!0,index:!0},date_added:{type:"Date","default":Date.now,required:!0}},{minimize:!1});t["default"]=u["default"].model("Form",l)},function(e,t){e.exports=require("redux")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return a["default"].createElement(s.IntlProvider,e.intl,e.children)}function u(e){return{intl:e.intl}}Object.defineProperty(t,"__esModule",{value:!0}),t.IntlWrapper=o;var i=n(1),a=r(i),s=n(7),l=n(8);t["default"]=(0,l.connect)(u)(o)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var u=t&&t.defaultProps,i=arguments.length-3;if(n||0===i||(n={}),n&&u)for(var a in u)void 0===n[a]&&(n[a]=u[a]);else n||(n=u||{});if(1===i)n.children=o;else if(i>1){for(var s=Array(i),l=0;l<i;l++)s[l]=arguments[l+3];n.children=s}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),u=n(1),i=(r(u),n(9)),a=n(60),s=r(a);t["default"]=o(i.Route,{path:"/",component:s["default"]},void 0,o(i.IndexRoute,{getComponent:function(e,t){n.e(1)["catch"](function(e){n.oe(e)}).then(function(e){t(null,n(110)["default"])}.bind(null,n))}}),o(i.Route,{path:"/forms/:slug-:cuid",getComponent:function(e,t){n.e(2)["catch"](function(e){n.oe(e)}).then(function(e){t(null,n(109)["default"])}.bind(null,n))}}),o(i.Route,{path:"/subms",getComponent:function(e,t){n.e(4)["catch"](function(e){n.oe(e)}).then(function(e){t(null,n(112)["default"])}.bind(null,n))}}),o(i.Route,{path:"/subms/:slug-:cuid",getComponent:function(e,t){n.e(3)["catch"](function(e){n.oe(e)}).then(function(e){t(null,n(111)["default"])}.bind(null,n))}}))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[(0,u.applyMiddleware)(a["default"])];process.env.CLIENT,1;var n=(0,u.createStore)(l["default"],e,u.compose.apply(void 0,t));return n}Object.defineProperty(t,"__esModule",{value:!0}),t.configureStore=o;var u=n(26),i=n(108),a=r(i),s=n(69),l=r(s)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(0!=t)return Promise.resolve().then(function(){return i["default"].count().exec()}).then(function(e){if(e>0)return console.log("subjects collection was filled"),[];if(t<2)return[];console.log("filling subjects collection ...");for(var n=[],r=0;r<1e3;r++){var o=!1;if(o)var u=new i["default"]({name:M.first(),surname:M.last(),birthdate:M.birthday({string:!0}),diseases:["CP"],slug:"test-human-subject"});else var u=new i["default"]({owner_name:M.first(),owner_surname:M.last(),owner_deathdate:M.birthday({string:!0}),anatomical_region:"foot",anatomical_side:M.character({pool:"RL"}),slug:"test-specimen-subject"});n.push(u)}return i["default"].create(n)}).then(function(e){e.length?console.log("subjects filled"):console.log("subjects skipped")}).then(function(){return s["default"].count().exec()}).then(function(e){if(e>0)return console.log("researchers collection was filled"),[];if(t<2)return[];console.log("filling researchers collection ...");for(var n=[],r=0;r<1e3;r++){var o=new s["default"]({name:M.first(),surname:M.last(),birthdate:M.birthday({string:!0}),slug:"test-researcher"});n.push(o)}return s["default"].create(n)}).then(function(e){e.length?console.log("researchers filled"):console.log("researchers skipped")}).then(function(){return c["default"].count().exec()}).then(function(e){if(e>0)return console.log("devices collection was filled"),[];if(t<2)return[];console.log("filling devices collection ...");for(var n=[],r=["device-type-1","device-type-2","device-type-3","device-type-4","device-type-5"],o=0;o<50;o++){var u=new c["default"]({name:"device-"+M.word(),type:r[M.integer({min:0,max:r.length-1})],producer:"Producer Inc.",uri:M.url(),slug:"test-device"});n.push(u)}return c["default"].create(n)}).then(function(e){e.length?console.log("devices filled"):console.log("devices skipped")}).then(function(){return f["default"].count().exec()}).then(function(e){if(e>0)return console.log("sw-tools collection was filled"),[];if(t<2)return[];console.log("filling sw-tools collection ...");for(var n=[],r=[{name:"software-A",company:"Micky Mouse Inc."},{name:"software-B",company:"Duffy Duck Ltd."},{name:"software-C",company:"Bla bla NV"},{name:"software-D",company:"and more Bla bla NV"}],o=0;o<50;o++){var u=r[M.integer({min:0,max:r.length-1})],i={min:0,max:10},a=M.integer(i),s=M.integer(i),l=M.integer(i),c=a+"."+s+"."+l,d=new f["default"]({name:u.name,version:c,producer:u.company,uri:M.url(),slug:"test-software"});n.push(d)}return f["default"].create(n)}).then(function(e){e.length?console.log("swtools filled"):console.log("swtools skipped")}).then(function(){return m["default"].count().exec()}).then(function(n){return n>0?(console.log("activities collection was filled"),[]):t<2?[]:(console.log("filling activities collection ..."),Promise.all([(0,O["default"])("researchers"),(0,O["default"])("subjects"),(0,O["default"])("devices"),(0,O["default"])("sw-tools")]).then(function(e){var t=e.reduce(function(e,t){return Object.assign(e,t)},{});return t}).then(function(t){for(var n=[];n.length<1e4;){var r=n.length,o=[{id:t.researchers[M.integer({min:0,max:t.researchers.length-1})].cuid}],u=M.bool({likelihood:15}),i=[];u&&(i=[{id:t.subjects[M.integer({min:0,max:t.subjects.length-1})].cuid}]);for(var a=[],s=0;s<M.natural({min:1,max:5});s++)a.push({id:t.devices[M.integer({min:0,max:t.devices.length-1})].cuid});for(var l=[],c=0;c<M.natural({min:1,max:5});c++)l.push({id:t.SWTools[M.integer({min:0,max:t.SWTools.length-1})].cuid});for(var d=[],f=0;f<M.natural({min:1,max:5});f++)d.push({cuid:(0,_["default"])(),name:M.word(),uri:M.url()});var p=[];if(r>100&&!u){e&&console.log("linking activity "+r+" ...");for(var m=0,v=0;v<M.natural({min:1,max:3});v++){for(var h=0,b=!1;h<5;){var y=M.natural({min:1,max:5}),g=r-y;if(h++,g>=0&&n[g].subjects.length>0){b=!0;var w=n[g].outputs[M.integer({min:0,max:n[g].outputs.length-1})];p.push({id:w.cuid});break}}b&&m++,e&&console.log("link "+v+": attempts="+h+", src_has_sbj="+b)}if(0==m){e&&console.log("skipping activity "+r);continue}}var S={name:M.sentence(),researchers:o,subjects:i,devices:a,software:l,outputs:d,other_resources:p,slug:"test-activity"};n.push(S)}return n}).then(function(e){return m["default"].create(e)}))}).then(function(e){e.length?console.log("activities filled"):console.log("activities skipped")}).then(function(){return h["default"].count().exec()}).then(function(e){if(e>0)return console.log("forms collection was filled"),[];console.log("filling forms collection ...");var t=[],r={title:"sample lab activity",json_schema:n(87),ui_schema:n(88),init_data:{name:"sample lab activity"},dest_collection:"activities",insert_on_submit:!0,slug:"sample-lab-activity"};t.push(r);var o={title:"Insert new software",json_schema:n(93),ui_schema:n(94),init_data:{},dest_collection:"swtools",insert_on_submit:!0,slug:"insert-new-software"};t.push(o);var u={title:"Insert new device",json_schema:n(89),ui_schema:n(90),init_data:{},dest_collection:"devices",insert_on_submit:!0,slug:"insert-new-device"};t.push(u);var i={title:"Insert new researcher",json_schema:n(91),ui_schema:n(92),init_data:{},dest_collection:"researchers",insert_on_submit:!0,slug:"insert-new-researcher"};t.push(i);var a={title:"Insert new subject",json_schema:n(95),ui_schema:n(96),init_data:{},dest_collection:"subjects",insert_on_submit:!0,slug:"insert-new-subject"};return t.push(a),h["default"].create(t)}).then(function(e){e.length?console.log("forms filled"):console.log("forms skipped")})}var u=n(10),i=r(u),a=n(17),s=r(a),l=n(16),c=r(l),d=n(18),f=r(d),p=n(15),m=r(p),v=n(25),h=r(v),b=n(2),y=r(b),g=n(3),_=r(g),w=n(98),S=r(w),j=n(12),O=r(j);y["default"].Promise=global.Promise;var M=(y["default"].Types.ObjectId,new S["default"]);e.exports=o},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var o=n(0),u=n(70),i=r(u),a=new o.Router;a.route("/database/collections").get(i.getCollections),e.exports=a},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var o=n(0),u=n(71),i=r(u),a=new o.Router;a.route("/devices").get(i.getDevices),a.route("/devices/:cuid").get(i.getDevice),e.exports=a},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var o=n(0),u=n(72),i=r(u),a=new o.Router;a.route("/devices").get(i.getDevices),e.exports=a},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var o=n(0),u=n(73),i=r(u),a=new o.Router;a.route("/forms").get(i.getForms),a.route("/forms/:cuid").get(i.getForm),a.route("/forms").post(i.addForm),a.route("/forms/:cuid").put(i.updateForm),a.route("/forms/:cuid")["delete"](i.deleteForm),e.exports=a},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var o=n(0),u=n(74),i=r(u),a=new o.Router;a.route("/outputs/:cuid").get(i.getOutput),e.exports=a},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var o=n(0),u=n(75),i=r(u),a=new o.Router;a.route("/outputs").get(i.getOutputs),e.exports=a},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var o=n(0),u=n(76),i=r(u),a=new o.Router;a.route("/researchers").get(i.getResearchers),a.route("/researchers/:cuid").get(i.getResearcher),e.exports=a},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var o=n(0),u=n(77),i=r(u),a=new o.Router;a.route("/researchers").get(i.getResearchers),e.exports=a},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var o=n(0),u=n(78),i=r(u),a=new o.Router;a.route("/subjects").get(i.getSubjects),a.route("/subjects/:cuid").get(i.getSubject),e.exports=a},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var o=n(0),u=n(79),i=r(u),a=new o.Router;a.route("/subjects").get(i.getSubjects),e.exports=a},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var o=n(0),u=n(80),i=r(u),a=new o.Router;a.route("/subms").get(i.getSubms),a.route("/subms/:cuid").get(i.getSubm),a.route("/subms").post(i.addSubm),a.route("/subms/:cuid").put(i.updateSubm),a.route("/subms/:cuid")["delete"](i.deleteSubm),e.exports=a},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var o=n(0),u=n(81),i=r(u),a=new o.Router;a.route("/sw-tools").get(i.getSWTools),a.route("/sw-tools/:cuid").get(i.getSWTool),e.exports=a},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var o=n(0),u=n(82),i=r(u),a=new o.Router;a.route("/sw-tools").get(i.getSWTools),e.exports=a},function(e,t,n){"use strict";var r=n(0),o=new r.Router;o.get("/msg",function(e,t){t.send("Test server server HMR")}),e.exports=o},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var o=n(0),u=n(83),i=r(u),a=new o.Router;a.route("/upload/file").post(i.uploadFile),a.route("/upload/data").post(i.uploadData),e.exports=a},function(e,t,n){"use strict";function r(e,t,n){var r=t.reduce(function(e,t){return(t.need||[]).concat((t.WrappedComponent&&t.WrappedComponent.need!==t.need?t.WrappedComponent.need:[])||[]).concat(e)},[]);return(0,o.sequence)(r,function(t){return e.dispatch(t(n,e.getState()))})}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchComponentData=r;var o=n(85)},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("compression")},function(e,t){e.exports=require("express-fileupload")},function(e,t){e.exports=require("isomorphic-fetch")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return{type:h,subm:e}}function u(e){return function(t){return(0,v["default"])("subms","post",{subm:e}).then(function(e){return t(o(e.subm))})}}function i(e){return{type:b,subms:e}}function a(){return function(e){return(0,v["default"])("subms").then(function(t){e(i(t.subms))})}}function s(e){return function(t){return(0,v["default"])("subms/"+e).then(function(e){return t(o(e.subm))})}}function l(e){return{type:y,cuid:e}}function c(e){return function(t){return(0,v["default"])("subms/"+e,"delete").then(function(){return t(l(e))})}}function d(e){return function(t){return(0,v["default"])("upload/data","post",e).then(function(){return t(c(e.cuid))})}}function f(e){return function(t){return(0,v["default"])("subms/"+e.cuid,"put",{subm:e}).then(function(e){return t(p(e.subm))})}}function p(e){return{type:g,subm:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.UPDATE_SUBM=t.ACCEPT_SUBM=t.DELETE_SUBM=t.ADD_SUBMS=t.ADD_SUBM=void 0,t.addSubm=o,t.addSubmRequest=u,t.addSubms=i,t.fetchSubms=a,t.fetchSubm=s,t.deleteSubm=l,t.deleteSubmRequest=c,t.acceptSubmRequest=d,t.updateSubmRequest=f,t.updateSubm=p;var m=n(12),v=r(m),h=t.ADD_SUBM="ADD_SUBM",b=t.ADD_SUBMS="ADD_SUBMS",y=t.DELETE_SUBM="DELETE_SUBM",g=(t.ACCEPT_SUBM="ACCEPT_SUBM",t.UPDATE_SUBM="UPDATE_SUBM")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return{type:b,form:e}}function u(e){return function(t){return(0,h["default"])("forms","post",{form:e}).then(function(e){return t(o(e.form))})}}function i(e){return{type:y,forms:e}}function a(){return function(e){return(0,h["default"])("forms").then(function(t){e(i(t.forms))})}}function s(e){return function(t){return(0,h["default"])("forms/"+e).then(function(e){return t(o(e.form))})}}function l(e){return{type:g,cuid:e}}function c(e){return function(t){return(0,h["default"])("forms/"+e,"delete").then(function(){return t(l(e))})}}function d(){return{type:_}}function f(e){return console.log("submiting"),function(t){return(0,h["default"])("form/upload/data","post",e)}}function p(e){return function(t){return(0,h["default"])("forms/"+e.cuid,"put",{form:e}).then(function(e){return t(m(e.form))})}}function m(e){return{type:w,form:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.UPDATE_FORM=t.SUBMIT_FORM=t.TOGGLE_ADD_FORM=t.DELETE_FORM=t.ADD_FORMS=t.ADD_FORM=void 0,t.addForm=o,t.addFormRequest=u,t.addForms=i,t.fetchForms=a,t.fetchForm=s,t.deleteForm=l,t.deleteFormRequest=c,t.toggleAddForm=d,t.submitForm=f,t.updateFormRequest=p,t.updateForm=m;var v=n(12),h=r(v),b=t.ADD_FORM="ADD_FORM",y=t.ADD_FORMS="ADD_FORMS",g=t.DELETE_FORM="DELETE_FORM",_=t.TOGGLE_ADD_FORM="TOGGLE_ADD_FORM",w=(t.SUBMIT_FORM="SUBMIT_FORM",t.UPDATE_FORM="UPDATE_FORM")},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getShowAddForm=t.getForm=t.getForms=void 0;var o=n(52),u={data:[],showAddForm:!1,submitted:[]},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments[1];switch(t.type){case o.ADD_FORM:return Object.assign({},e,{data:[t.form].concat(r(e.data))});case o.ADD_FORMS:return Object.assign({},e,{data:t.forms});case o.DELETE_FORM:return Object.assign({},e,{data:e.data.filter(function(e){return e.cuid!==t.cuid})});case o.TOGGLE_ADD_FORM:return Object.assign({},e,{showAddForm:!e.showAddForm});case o.SUBMIT_FORM:return Object.assign({},e,{submitted:[t.data].concat(r(e.submitted))});case o.UPDATE_FORM:return Object.assign({},e,{data:e.data.map(function(e){return e.cuid===t.form.cuid?t.form:e})});default:return e}};t.getForms=function(e){return e.forms.data},t.getForm=function(e,t){return e.forms.data.filter(function(e){return e.cuid===t})[0]},t.getShowAddForm=function(e){return e.forms.showAddForm};t["default"]=i},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getSubm=t.getSubms=void 0;var o=n(51),u={data:[]},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments[1];switch(t.type){case o.ADD_SUBM:return Object.assign({},e,{data:[t.subm].concat(r(e.data))});case o.ADD_SUBMS:return Object.assign({},e,{data:t.subms});case o.DELETE_SUBM:return Object.assign({},e,{data:e.data.filter(function(e){return e.cuid!==t.cuid})});case o.ACCEPT_SUBM:return Object.assign({},e,{});case o.UPDATE_SUBM:return Object.assign({},e,{data:e.data.map(function(e){return e.cuid===t.subm.cuid?t.subm:e})});default:return e}};t.getSubms=function(e){return e.subms.data},t.getSubm=function(e,t){return e.subms.data.filter(function(e){return e.cuid===t})[0]};t["default"]=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={locale:"en",messages:{save:"Save",siteTitle:"MERN App",addPost:"Add Post",switchLanguage:"Switch Language",twitterMessage:"We are on Twitter",by:"By",deletePost:"Delete Post",createNewPost:"Create new post",authorName:"Author's Name",postTitle:"Post Title",postContent:"Post Content",submit:"Submit",comment:"user {name} {value, plural,\n    \t  =0 {does not have any comments}\n    \t  =1 {has # comment}\n    \t  other {has # comments}\n    \t}",HTMLComment:"user <b style='font-weight: bold'>{name} </b> {value, plural,\n    \t  =0 {does not have <i style='font-style: italic'>any</i> comments}\n    \t  =1 {has <i style='font-style: italic'>#</i> comment}\n    \t  other {has <i style='font-style: italic'>#</i> comments}\n    \t}",
nestedDateComment:"user {name} {value, plural,\n    \t  =0 {does not have any comments}\n    \t  =1 {has # comment}\n    \t  other {has # comments}\n    \t} as of {date}",addForm:"Add Form",editForm:"Edit Form",deleteForm:"Delete Form",createNewForm:"Create new form",formTitle:"Form Title",formJSONSchema:"Form JSON Schema",formUISchema:"Form UI Schema",formInitData:"Form initial data",formPreview:"Form preview",acceptSubm:"Accept Submission",deleteSubm:"Delete Submission"}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={locale:"fr",messages:{siteTitle:"MERN blog de démarrage",addPost:"Ajouter Poster",switchLanguage:"Changer de langue",twitterMessage:"Nous sommes sur Twitter",by:"Par",deletePost:"Supprimer le message",createNewPost:"Créer un nouveau message",authorName:"Nom de l'auteur",postTitle:"Titre de l'article",postContent:"Contenu après",submit:"Soumettre",comment:"user {name} {value, plural,\n    \t  =0 {does not have any comments}\n    \t  =1 {has # comment}\n    \t  other {has # comments}\n    \t} (in real app this would be translated to French)",HTMLComment:"user <b style='font-weight: bold'>{name} </b> {value, plural,\n    \t  =0 {does not have <i style='font-style: italic'>any</i> comments}\n    \t  =1 {has <i style='font-style: italic'>#</i> comment}\n    \t  other {has <i style='font-style: italic'>#</i> comments}\n    \t} (in real app this would be translated to French)",nestedDateComment:"user {name} {value, plural,\n  \t\t  =0 {does not have any comments}\n  \t\t  =1 {has # comment}\n  \t\t  other {has # comments}\n  \t\t} as of {date} (in real app this would be translated to French)"}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var u=t&&t.defaultProps,i=arguments.length-3;if(n||0===i||(n={}),n&&u)for(var a in u)void 0===n[a]&&(n[a]=u[a]);else n||(n=u||{});if(1===i)n.children=o;else if(i>1){for(var s=Array(i),l=0;l<i;l++)s[l]=arguments[l+3];n.children=s}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),d=n(13),f=r(d),p=null,m="port",v=function(e){},h=function(e){function t(e){o(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={data:p},n.token=null,n.recursiveCloneChildren=n.recursiveCloneChildren.bind(n),n._isMounted=!1,n}return i(t,e),s(t,[{key:"render",value:function(){return a("div",{},void 0,this.recursiveCloneChildren(this.props.children))}},{key:"recursiveCloneChildren",value:function(e){var t=this;return c["default"].Children.map(e,function(e){var n={};return c["default"].isValidElement(e)?(t.props.propagateDataToChildren&&null!=t.state.data&&(n={data:t.state.data}),n.children=t.recursiveCloneChildren(e.props.children),c["default"].cloneElement(e,n)):e})}},{key:"componentDidMount",value:function(){this.setUpNewDataInConnection(this.props.dataInPort),this._isMounted=!0}},{key:"componentWillUnmount",value:function(){null!=this.token&&(f["default"].unsubscribe(this.token),this.token=null),this._isMounted=!1}},{key:"componentWillUpdate",value:function(e){var t=e.dataInPort;t!=this.props.dataInPort&&this.setUpNewDataInConnection(t)}},{key:"setUpNewDataInConnection",value:function(e){var t=this;null!=this.token&&(f["default"].unsubscribe(this.token),this.token=null),""!=e&&(this.token=f["default"].subscribe(e,function(e,n){t._isMounted&&(t.setState({data:n}),t.props.receiveCallback(n))}))}}]),t}(c["default"].Component);h.defaultProps={dataInPort:m,receiveCallback:v,propagateDataToChildren:!0},t["default"]=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var u=t&&t.defaultProps,i=arguments.length-3;if(n||0===i||(n={}),n&&u)for(var a in u)void 0===n[a]&&(n[a]=u[a]);else n||(n=u||{});if(1===i)n.children=o;else if(i>1){for(var s=Array(i),l=0;l<i;l++)s[l]=arguments[l+3];n.children=s}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),d=n(13),f=r(d),p="",m=function(e){},v=a("b",{},void 0,a("i",{},void 0,"--Out-port--")),h=a("b",{},void 0,"Port: "),b=function(e){function t(e){o(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.token=null,n}return i(t,e),s(t,[{key:"render",value:function(){return a("div",{},void 0,v,a("div",{},void 0,h,this.props.port))}},{key:"componentDidMount",value:function(){this.setUpNewDataOutConnection(this.props.port)}},{key:"componentWillUpdate",value:function(e,t){this.props.port!=e.port&&this.setUpNewDataOutConnection(e.port)}},{key:"setUpNewDataOutConnection",value:function(e){var t=this;null!=this.token&&f["default"].unsubscribe(this.token),this.token=f["default"].subscribe(e,function(n,r){t.props.sendCallback(e,r)})}}]),t}(c["default"].Component);b.defaultProps={port:p,sendCallback:m},t["default"]=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var u=t&&t.defaultProps,i=arguments.length-3;if(n||0===i||(n={}),n&&u)for(var a in u)void 0===n[a]&&(n[a]=u[a]);else n||(n=u||{});if(1===i)n.children=o;else if(i>1){for(var s=Array(i),l=0;l<i;l++)s[l]=arguments[l+3];n.children=s}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),d=n(104),f=(r(d),n(97)),p=r(f),m=n(23),v=r(m),h=!1,b="",y="",g="status",_=a("b",{},void 0,"Url:"),w=a("b",{},void 0,"Realm:"),S=function(e){function t(e){o(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.tearDownConnection=function(){null!=n.connection&&(n.connection.close(),n.connection=null,n.session=null)},n.setUpNewConnection=function(e,t){n.tearDownConnection(),""!=e&&""!=t&&(n.connection=new p["default"].Connection({url:e,realm:t}),n.connection.onopen=function(e,t){n.session=e,c["default"].Children.map(n.props.children,function(t){if(c["default"].isValidElement(t)&&(t.type==v["default"]||"InPort"==t.type.name)){var r=t.props.port;e.subscribe(r,function(e){n.props.onData(r,e[0])}).then(function(e){console.log("WAMP socket subscribed to topic "+r),r==n.props.statusInPort&&n.props.onData(r,{data:"WAMP connected"})},function(e){console.log("WAMP socket not subscribed to topic "+r+": "+e)})}})},n.connection.onclose=function(e,t){console.log("WAMP socket disconnected"),n.props.onData(n.props.statusInPort,{data:"WAMP diconnected"})},n.connection.open())},n.handleSend=function(e,t){null!=n.connection&&null!=n.session&&n.session.publish(e,[t])},n.state={},n.connection=null,n.session=null,n}return i(t,e),s(t,[{key:"render",value:function(){return a("div",{},void 0,a("div",{},void 0,_," ",this.props.url),a("div",{},void 0,w," ",this.props.realm),this.props.children)}},{key:"componentDidMount",value:function(){this.props.enabled&&this.setUpNewConnection(this.props.url,this.props.realm)}},{key:"componentWillUpdate",value:function(e,t){var n=e.url,r=e.realm;if(e.enabled&&!this.props.enabled&&this.setUpNewConnection(n,r),!e.enabled&&this.props.enabled&&this.tearDownConnection(),n==this.props.url&&r==this.props.realm||e.enabled&&this.setUpNewConnection(n,r),e.data!=this.props.data){var o=e.data.port,u=e.data.data;this.handleSend(o,u)}}}]),t}(c["default"].Component);S.defaultProps={enabled:h,url:b,realm:y,statusInPort:g},t["default"]=S},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return{intl:e.intl}}Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;var s,l=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var u=t&&t.defaultProps,i=arguments.length-3;if(n||0===i||(n={}),n&&u)for(var a in u)void 0===n[a]&&(n[a]=u[a]);else n||(n=u||{});if(1===i)n.children=o;else if(i>1){for(var s=Array(i),l=0;l<i;l++)s[l]=arguments[l+3];n.children=s}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),f=r(d),p=n(8),m={container:"_15uqt7TaQcflNYjiD0-re1"},v=r(m),h=n(14),b=r(h),y=n(64),g=r(y),_=n(63),w=r(_),S=n(65),j=r(S),O=n(66),M=r(O),P=n(67),x=r(P),D=n(24),k=l(s,{}),A=l(M["default"],{}),R=l(w["default"],{}),C=t.App=function(e){function t(e){o(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.redirectToForm=function(e){n.context.router.push("/forms/"+e)},n.state={isMounted:!1},n}return i(t,e),c(t,[{key:"componentDidMount",value:function(){console.log("<App> module mounted"),this.setState({isMounted:!0})}},{key:"render",value:function(){var e=this;return l("div",{},void 0,this.state.isMounted&&!window.devToolsExtension&&!1&&k,l("div",{},void 0,l(b["default"],{title:"DB data insertion app",titleTemplate:"%s",meta:[{charset:"utf-8"},{"http-equiv":"X-UA-Compatible",content:"IE=edge"},{name:"viewport",content:"width=device-width, initial-scale=1"}]}),l(g["default"],{switchLanguage:function(t){return e.props.dispatch((0,D.switchLanguage)(t))},intl:this.props.intl},void 0,l(j["default"],{data:[{label:"WAMP connection"},{label:"Work-flow client"}]},void 0,A,l(x["default"],{onEnterTask:this.redirectToForm}))),l("div",{className:v["default"].container},void 0,this.props.children),R))}}]),t}(d.Component);C.contextTypes={router:f["default"].PropTypes.object.isRequired},t["default"]=(0,p.connect)(a)(C)},function(e,t){"use strict"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getShowAddPost=void 0;var r=n(61),o={showAddPost:!1},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case r.TOGGLE_ADD_POST:return{showAddPost:!e.showAddPost};default:return e}};t.getShowAddPost=function(e){return e.app.showAddPost};t["default"]=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){return u("div",{style:{background:"#FFF url("+c["default"]+") center"},className:s["default"].footer},void 0)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var u=t&&t.defaultProps,i=arguments.length-3;if(n||0===i||(n={}),n&&u)for(var a in u)void 0===n[a]&&(n[a]=u[a]);else n||(n=u||{});if(1===i)n.children=o;else if(i>1){for(var s=Array(i),l=0;l<i;l++)s[l]=arguments[l+3];n.children=s}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}();t.Footer=o;var i=n(1),a=(r(i),n(7),{footer:"_1oiRVDtQ6fOWkhBVWcRyE_"}),s=r(a),l="/bbaeb5f32b7042f0def39648a1d111b9.png",c=r(l);t["default"]=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n=e.intl.enabledLanguages.map(function(t){return u("li",{onClick:function(){return e.switchLanguage(t)},className:t===e.intl.locale?d["default"].selected:""},t,t)}),r=[{name:"Forms",url:"/"},{name:"Submissions",url:"/subms"}];return u("div",{className:d["default"].header},void 0,u("div",{className:d["default"]["language-switcher"]},void 0,u("ul",{},void 0,f,n)),u("div",{className:d["default"].content},void 0,e.children),u("div",{className:d["default"]["panel-switcher"]},void 0,u("ul",{},void 0,r.map(function(e){return u("li",{},e.name,u(s.Link,{to:e.url},void 0,e.name))}))))}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var u=t&&t.defaultProps,i=arguments.length-3;if(n||0===i||(n={}),n&&u)for(var a in u)void 0===n[a]&&(n[a]=u[a]);else n||(n=u||{});if(1===i)n.children=o;else if(i>1){for(var s=Array(i),l=0;l<i;l++)s[l]=arguments[l+3];n.children=s}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}();t.Header=o;var i=n(1),a=r(i),s=n(9),l=n(7),c={header:"_3EGjKVGKCGTGQn_m_YASdF",content:"_391cv5n_RFU0K9SBOjXDEt","site-title":"_11V45Tl3_Hdy_ARI53CW9g","add-post-button":"XrNjmGRHH_vMEgGeC3S75","language-switcher":"X6vAu1vEuRDWiN2kDvA_z","panel-switcher":"_2I4ryUD_rnJMRXpUrwIASM",selected:"_3ecuVjN6tTUWkR7u3Co3s"},d=r(c),f=u("li",{},void 0,u(l.FormattedMessage,{id:"switchLanguage"}));o.contextTypes={router:a["default"].PropTypes.object},t["default"]=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var u=t&&t.defaultProps,i=arguments.length-3;if(n||0===i||(n={}),n&&u)for(var a in u)void 0===n[a]&&(n[a]=u[a]);else n||(n=u||{});if(1===i)n.children=o;else if(i>1){for(var s=Array(i),l=0;l<i;l++)s[l]=arguments[l+3];n.children=s}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),d=n(105),f=function(e){function t(){return o(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this;return a("div",{},void 0,a(d.Tabs,{defaultActiveKey:1,id:"services",animation:!1},void 0,c["default"].Children.toArray(this.props.children).map(function(t,n){return a(d.Tab,{eventKey:n+1,title:e.props.data[n].label,unmountOnExit:!1},n,t)})))}}]),t}(c["default"].Component);t["default"]=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var u=t&&t.defaultProps,i=arguments.length-3;if(n||0===i||(n={}),n&&u)for(var a in u)void 0===n[a]&&(n[a]=u[a]);else n||(n=u||{});if(1===i)n.children=o;else if(i>1){for(var s=Array(i),l=0;l<i;l++)s[l]=arguments[l+3];n.children=s}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),d=(r(c),n(23)),f=r(d),p=n(58),m=r(p),v=n(59),h=r(v),b={summary:"_3jmTs_lW1oh4UoohJUunV9",inputs:"_2zMoFx1oFaecwO6hZthKlO","pos-right":"_1cYLihHSfKN6MUiYMdbHvX","pos-left":"_2yGCNyJ_vsu0seE2QGnFmC"},y=r(b),g=s("td",{},void 0,"Url:"),_=s("td",{},void 0,"Realm:"),w=s("td",{},void 0,"Enabled:"),S=function(e){function t(e){u(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setUrlStream=function(e){var t=e.target.value;n.setState({urlStream:t})},n.setRealmStream=function(e){var t=e.target.value;n.setState({realmStream:t})},n.setEnabled=function(e){var t=e.target.checked;n.setState({enabled:t})},n.onData=function(e,t){n.setState(o({},e,t))},n.sendCallback=function(e,t){n.setState({socketData:{port:e,data:t}})},n.state={urlStream:"ws://127.0.0.1:8002/ws",realmStream:"realm1",enabled:!1},n}return a(t,e),l(t,[{key:"render",value:function(){return s("div",{},void 0,s("div",{className:y["default"]["pos-left"]},void 0,s("div",{className:y["default"].inputs},void 0,s("table",{},void 0,s("tbody",{},void 0,s("tr",{},void 0,g,s("td",{},void 0,s("input",{type:"text",value:this.state.urlStream,onChange:this.setUrlStream}))),s("tr",{},void 0,_,s("td",{},void 0,s("input",{type:"text",value:this.state.realmStream,onChange:this.setRealmStream}))),s("tr",{},void 0,w,s("td",{},void 0,s("input",{type:"checkbox",checked:this.state.enabled,onChange:this.setEnabled}))))))),s("div",{className:y["default"]["pos-right"]},void 0,s("div",{className:y["default"].summary},void 0,s(h["default"],{enabled:this.state.enabled,url:this.state.urlStream,realm:this.state.realmStream,statusInPort:"ws-status",onData:this.onData,data:this.state.socketData},void 0,s(f["default"],{port:"ws-status",data:this.state["ws-status"],buffered:!1,showContent:!0}),s(f["default"],{port:"wf-task-enter",data:this.state["wf-task-enter"],buffered:!1,showContent:!0}),s(m["default"],{port:"wf-task-exit",sendCallback:this.sendCallback})))))}}]),t}(c.Component);t["default"]=S},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var u=t&&t.defaultProps,i=arguments.length-3;if(n||0===i||(n={}),n&&u)for(var a in u)void 0===n[a]&&(n[a]=u[a]);else n||(n=u||{});if(1===i)n.children=o;else if(i>1){for(var s=Array(i),l=0;l<i;l++)s[l]=arguments[l+3];n.children=s}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=(r(l),n(57)),d=r(c),f={summary:"_2K51-6AHP9r6v2gtCME-I6",inputs:"_2HnMeZvRC20NHJRawOYMUF","pos-right":"OpFVwf7KS55QVrkBfXIYG","pos-left":"_3tZrrcIjzK-lY_8GXnIrn4"},p=r(f),m=a("tr",{},void 0,a("td",{},void 0,"Listening on port:"),a("td",{},void 0,"wf-task-enter")),v=a("td",{},void 0,"Enabled:"),h=function(e){function t(e){o(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleReceiveMessage=function(e){n.state.enabled&&n.props.onEnterTask(e.url)},n.setEnabled=function(e){var t=e.target.checked;n.setState({enabled:t})},n.state={enabled:!1},n}return i(t,e),s(t,[{key:"render",value:function(){return a("div",{},void 0,a("div",{className:p["default"]["pos-left"]},void 0,a("div",{className:p["default"].inputs},void 0,a("table",{},void 0,a("tbody",{},void 0,m,a("tr",{},void 0,v,a("td",{},void 0,a("input",{type:"checkbox",checked:this.state.enabled,onChange:this.setEnabled}))))))),a(d["default"],{dataInPort:"wf-task-enter",receiveCallback:this.handleReceiveMessage}))}}]),t}(l.Component);t["default"]=h},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(22),i=n(24),a=global.navigator&&global.navigator.language||"en",s=o({locale:a,enabledLanguages:u.enabledLanguages},u.localizationData[a]||{}),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case i.SWITCH_LANGUAGE:var n=(t.type,r(t,["type"]));return o({},e,n);default:return e}};t["default"]=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(26),u=n(62),i=r(u),a=n(53),s=r(a),l=n(54),c=r(l),d=n(68),f=r(d);t["default"]=(0,o.combineReducers)({app:i["default"],forms:s["default"],subms:c["default"],intl:f["default"]})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){i["default"].connection.db.listCollections().toArray(function(e,n){if(e)return t.status(500).send(e);n=n.filter(function(e){return!["forms","subms"].includes(e.name)});try{var r=i["default"].connection.models;n=n.map(function(e){var t=Object.keys(r).filter(function(t){return r[t].collection.collectionName==e.name})[0],n=r[t];return{name:e.name,JSONSchema:n.getJSONSchema()}}),t.json({collections:n})}catch(e){return t.status(500).send(e)}})}Object.defineProperty(t,"__esModule",{value:!0}),t.getCollections=o;var u=n(2),i=r(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){a["default"].find().exec(function(e,n){return e?t.status(500).send(e):void t.json({devices:n})})}function u(e,t){a["default"].findOne({cuid:e.params.cuid}).exec(function(e,n){return e?t.status(500).send(e):void t.json({device:n})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getDevices=o,t.getDevice=u;var i=n(16),a=r(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n=e.query.q,r="("+n.trim().replace(/\s+/g,"|")+")";new RegExp(r,"i");i["default"].find({$or:[{$text:{$search:n}}]},{score:{$meta:"textScore"}}).sort({score:{$meta:"textScore"}}).exec(function(e,n){return e?t.status(500).send(e):void t.json({devices:n})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getDevices=o;var u=n(16),i=r(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){c["default"].find().sort("-date_added").exec(function(e,n){return e?t.status(500).send(e):void t.json({forms:n})})}function u(e,t){if(!(e.body.form.title&&e.body.form.json_schema&&e.body.form.ui_schema&&e.body.form.init_data))return t.status(403).json(null);var n=new c["default"](e.body.form);n.title=(0,h["default"])(n.title),n.slug=(0,m["default"])(n.title.toLowerCase(),{lowercase:!0}),n.cuid=(0,f["default"])(),n.save(function(e,n){return e?t.status(500).send(e):void t.json({form:n})})}function i(e,t){c["default"].findOne({cuid:e.params.cuid}).exec(function(e,n){return e?t.status(500).send(e):void t.json({form:n})})}function a(e,t){c["default"].findOne({cuid:e.params.cuid}).exec(function(e,n){return e?t.status(500).send(e):void n.remove(function(){t.status(200).json(null)})})}function s(e,t){c["default"].findOneAndUpdate({cuid:e.params.cuid},{$set:e.body.form},{"new":!0}).exec(function(e,n){return e?t.status(500).send(e):void t.json({form:n})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getForms=o,t.addForm=u,t.getForm=i,t.deleteForm=a,t.updateForm=s;var l=n(25),c=r(l),d=n(3),f=r(d),p=n(19),m=r(p),v=n(20),h=r(v),b=n(4);r(b)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){a["default"].aggregate([{$unwind:"$outputs"}]).exec(function(e,n){return e?t.status(500).send(e):void t.json({outputs:n})})}function u(e,t){a["default"].aggregate([{$match:{"outputs.cuid":e.params.cuid}},{$unwind:"$outputs"},{$match:{"outputs.cuid":e.params.cuid}},{$addFields:{output:"$outputs"}},{$project:{outputs:0}},{$addFields:{"output.activity":"$$CURRENT"}},{$replaceRoot:{newRoot:"$output"}},{$project:{"activity.output":0}}]).exec(function(e,n){if(e)return t.status(500).send(e);var r=void 0;n&&(r=n[0]),t.json({output:r})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getOutputs=o,t.getOutput=u;var i=n(15),a=r(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n=e.query.q,r="("+n.trim().replace(/\s+/g,"|")+")";new RegExp(r,"i");s["default"].find({$or:[{$text:{$search:n}}]}).exec().then(function(e){return e.map(function(e){return e.cuid})}).then(function(e){return i["default"].aggregate([{$match:{$or:[{$text:{$search:n}},{"subjects.id":{$in:e}}]}},{$addFields:{score:{$meta:"textScore"}}},{$graphLookup:{from:"activities",startWith:"$other_resources.id",connectFromField:"other_resources.id",connectToField:"outputs.cuid",as:"prev"}},{$unwind:{path:"$prev",preserveNullAndEmptyArrays:!0}},{$unwind:{path:"$prev.subjects",preserveNullAndEmptyArrays:!0}},{$addFields:{sbj_prev_involved:{$cond:{"if":{$in:["$prev.subjects.id",e]},then:1,"else":0}}}},{$sort:{score:{$meta:"textScore"},sbj_prev_involved:-1}},{$unwind:"$outputs"},{$addFields:{output:"$outputs"}},{$project:{outputs:0}},{$addFields:{"output.activity":"$$CURRENT"}},{$replaceRoot:{newRoot:"$output"}},{$project:{"activity.output":0}}]).exec()}).then(function(e){return i["default"].populate(e,{path:"activity.subjects"})}).then(function(e){return i["default"].populate(e,{path:"activity.prev.subject"})}).then(function(e){t.json({outputs:e})})["catch"](function(e){t.status(500).send(e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.getOutputs=o;var u=n(15),i=r(u),a=n(10),s=r(a);n(2).Types.ObjectId},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){a["default"].find().exec(function(e,n){return e?t.status(500).send(e):void t.json({researchers:n})})}function u(e,t){a["default"].findOne({cuid:e.params.cuid}).exec(function(e,n){return e?t.status(500).send(e):void t.json({researcher:n})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getResearchers=o,t.getResearcher=u;var i=n(17),a=r(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n=e.query.q,r="("+n.trim().replace(/\s+/g,"|")+")";new RegExp(r,"i");i["default"].find({$or:[{$text:{$search:n}}]},{score:{$meta:"textScore"}}).sort({score:{$meta:"textScore"}}).exec(function(e,n){return e?t.status(500).send(e):void t.json({researchers:n})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getResearchers=o;var u=n(17),i=r(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){a["default"].find().exec(function(e,n){return e?t.status(500).send(e):void t.json({subjects:n})})}function u(e,t){a["default"].findOne({cuid:e.params.cuid}).exec(function(e,n){return e?t.status(500).send(e):void t.json({subject:n})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getSubjects=o,t.getSubject=u;var i=n(10),a=r(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n=e.query.q,r="("+n.trim().replace(/\s+/g,"|")+")";new RegExp(r,"i");i["default"].find({$or:[{$text:{$search:n}}]},{score:{$meta:"textScore"}}).sort({score:{$meta:"textScore"}}).exec(function(e,n){return e?t.status(500).send(e):void t.json({subjects:n})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getSubjects=o;var u=n(10),i=r(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){c["default"].find().sort("date_added").populate("form").exec(function(e,n){return e?t.status(500).send(e):void t.json({subms:n})})}function u(e,t){if(!e.body.subm.form||!e.body.subm.data)return t.status(403).end();var n=new c["default"](e.body.subm);console.log(n.data),n.slug="submission",n.cuid=(0,f["default"])(),n.save(function(e,n){return e?t.status(500).send(e):void t.json({subm:n})})}function i(e,t){c["default"].findOne({cuid:e.params.cuid}).populate("form").exec(function(e,n){return e?t.status(500).send(e):void t.json({
subm:n})})}function a(e,t){c["default"].findOne({cuid:e.params.cuid}).exec(function(e,n){return e?t.status(500).send(e):void n.remove(function(e){t.status(200).json(null)})})}function s(e,t){c["default"].findOneAndUpdate({cuid:e.params.cuid},{$set:e.body.subm},{"new":!0}).populate("form").exec(function(e,n){return e?t.status(500).send(e):void t.json({subm:n})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getSubms=o,t.addSubm=u,t.getSubm=i,t.deleteSubm=a,t.updateSubm=s;var l=n(84),c=r(l),d=n(3),f=r(d),p=n(19),m=(r(p),n(20)),v=(r(m),n(4));r(v)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){a["default"].find().exec(function(e,n){return e?t.status(500).send(e):void t.json({SWTools:n})})}function u(e,t){a["default"].findOne({cuid:e.params.cuid}).exec(function(e,n){return e?t.status(500).send(e):void t.json({SWTool:n})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getSWTools=o,t.getSWTool=u;var i=n(18),a=r(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n=e.query.q,r="("+n.trim().replace(/\s+/g,"|")+")";new RegExp(r,"i");i["default"].find({$or:[{$text:{$search:n}}]},{score:{$meta:"textScore"}}).sort({score:{$meta:"textScore"}}).exec(function(e,n){return e?t.status(500).send(e):void t.json({SWTools:n})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getSWTools=o;var u=n(18),i=r(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!e.files)return t.status(400).send("No files were uploaded.");var n=e.files.file,r=(0,l["default"])();n.mv(a["default"].join(m["default"].workDir,r),function(e){return e?t.status(500).send(e):void t.json({newFileName:r})})}function u(e,t){var n=e.body;Promise.resolve().then(function(){return new Promise(function(e,t){if(n.form.insert_on_submit){var r=y["default"].connection.models,o=Object.keys(r).filter(function(e){return r[e].collection.collectionName==n.form.dest_collection})[0],u=r[o],i=new u(n.data);i.slug=(0,d["default"])(""+o,{lowercase:!0}),i.save(function(n,r){return n?t(n):void e({saved:r})})}else e({})})}).then(function(e){return new Promise(function(t,r){e.saved&&(n.saved=e.saved);var o=JSON.stringify(n,null,2),u=(0,l["default"])();h["default"].writeFile(a["default"].join(m["default"].workDir,u+".json"),o,function(n){return n?r(n):(console.log("File has been created"),e.fileName=u,void t(e))})})}).then(function(e){t.json(e)})["catch"](function(e){console.log(e),t.status(500).send(e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.uploadFile=o,t.uploadData=u;var i=n(5),a=r(i),s=n(3),l=r(s),c=n(19),d=r(c),f=n(20),p=(r(f),n(4)),m=r(p),v=n(6),h=r(v),b=n(2),y=r(b)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),u=r(o),i=n(3),a=r(i),s=u["default"].Schema;"Subm"in u["default"].connection.models&&delete u["default"].connection.models.Subm;var l=new s({data:{type:"Mixed",required:!0},form:{type:s.ObjectId,required:!0,ref:"Form"},slug:{type:"String",required:!0},cuid:{type:"String","default":a["default"],required:!0,index:!0},date_added:{type:"Date","default":Date.now,required:!0}});t["default"]=u["default"].model("Subm",l)},function(e,t){"use strict";function n(e,t){var n=[],r=function o(){var r=e.shift();return r?t(r).then(function(e){n.push(e)}).then(o):Promise.resolve(n)};return r()}Object.defineProperty(t,"__esModule",{value:!0}),t.sequence=n},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var u=t&&t.defaultProps,i=arguments.length-3;if(n||0===i||(n={}),n&&u)for(var a in u)void 0===n[a]&&(n[a]=u[a]);else n||(n=u||{});if(1===i)n.children=o;else if(i>1){for(var s=Array(i),l=0;l<i;l++)s[l]=arguments[l+3];n.children=s}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),u=n(0),i=r(u),a=n(48),s=r(a),l=n(2),c=r(l),d=n(47),f=r(d),p=n(5),m=r(p),v=n(27),h=r(v),b=n(49),y=r(b),g=n(29),_=n(8),w=n(1),S=r(w),j=n(21),O=n(9),M=n(14),P=r(M),x=n(28),D=r(x),k=n(46),A=n(4),R=r(A),C=new i["default"];console.log(R["default"]),c["default"].Promise=global.Promise,c["default"].connect(R["default"].mongoURL,function(e){if(e)throw console.error("Please make sure Mongodb is installed and running!"),e;console.log("Connected to db");var t=R["default"].prefillDb,r=function(e,t){n(30)(e,t).then(function(){return console.log("db filled with fictitious data when necessary")})["catch"](function(e){return console.log(e)})};r(!1,t)}),C.use((0,s["default"])()),C.use(f["default"].json({limit:"20mb"})),C.use(f["default"].urlencoded({limit:"20mb",extended:!1})),C.use(i["default"]["static"](m["default"].resolve(e,"../dist"))),C.use((0,y["default"])());var F="/api",T="/search-api";C.use(F,function(e,t,r){n(34)(e,t,r)}),C.use(F,function(e,t,r){n(41)(e,t,r)}),C.use(F,function(e,t,r){n(45)(e,t,r)}),C.use(F,function(e,t,r){n(39)(e,t,r)}),C.use(F,function(e,t,r){n(37)(e,t,r)}),C.use(F,function(e,t,r){n(32)(e,t,r)}),C.use(F,function(e,t,r){n(42)(e,t,r)}),C.use(F,function(e,t,r){n(35)(e,t,r)}),C.use(F,function(e,t,r){n(31)(e,t,r)}),C.use(T,function(e,t,r){n(40)(e,t,r)}),C.use(T,function(e,t,r){n(38)(e,t,r)}),C.use(T,function(e,t,r){n(33)(e,t,r)}),C.use(T,function(e,t,r){n(43)(e,t,r)}),C.use(T,function(e,t,r){n(36)(e,t,r)}),C.use("/test-hmr-api",function(e,t,r){n(44)(e,t,r)});var E=function(e,t){var n=P["default"].rewind(),r=process.env.webpackAssets&&JSON.parse(process.env.webpackAssets),o=process.env.webpackChunkAssets&&JSON.parse(process.env.webpackChunkAssets);return"\n    <!doctype html>\n    <html>\n      <head>\n        "+n.base.toString()+"\n        "+n.title.toString()+"\n        "+n.meta.toString()+"\n        "+n.link.toString()+"\n        "+n.script.toString()+"\n\n        "+("<link rel='stylesheet' href='"+r["/app.css"]+"' />")+'\n\n      </head>\n      <body>\n        <div id="root">'+e+"</div>\n        <script>\n          window.__INITIAL_STATE__ = "+JSON.stringify(t).replace(/</g,"\\u003c")+";\n          "+("//<![CDATA[\n          window.webpackManifest = "+JSON.stringify(o)+";\n          //]]>")+"\n        </script>\n        <script src='"+r["/vendor.js"]+"'></script>\n        <script src='"+r["/app.js"]+"'></script>\n      </body>\n    </html>\n  "},q=function(e){var t="";return E("Server Error"+t,{})};C.use(function(e,t,n){(0,O.match)({routes:D["default"],location:e.url},function(e,r,u){if(e)return t.status(500).end(q(e));if(r)return t.redirect(302,r.pathname+r.search);if(!u)return n();var i=(0,g.configureStore)();return(0,k.fetchComponentData)(i,u.components,u.params).then(function(){var e=(0,j.renderToString)(o(_.Provider,{store:i},void 0,o(h["default"],{},void 0,S["default"].createElement(O.RouterContext,u)))),n=i.getState();t.set("Content-Type","text/html").status(200).end(E(e,n))})["catch"](function(e){return n(e)})})});C.listen(R["default"].port,function(e){e||console.log("SERVER is running on port: "+R["default"].port+"!")}),t["default"]=C}).call(t,"server")},function(e,t){e.exports={type:"object",properties:{name:{type:"string",title:"Description:"},researchers:{type:"array",title:"Researchers",items:{type:"object",properties:{id:{type:"string",title:"Id","default":""}}}},subjects:{type:"array",title:"Subjects",items:{type:"object",properties:{id:{type:"string",title:"Id","default":""}}}},devices:{type:"array",title:"Devices",items:{type:"object",properties:{id:{type:"string",title:"Id","default":""}}}},software:{type:"array",title:"Software",items:{type:"object",properties:{id:{type:"string",title:"Id","default":""}}}},other_resources:{type:"array",title:"Other resources",items:{type:"object",properties:{id:{type:"string",title:"Id","default":""}}}},outputs:{type:"array",title:"Outputs",items:{type:"object",properties:{name:{type:"string",title:"Name","default":""},uri:{type:"string",title:"File","default":""},metadata:{type:"array",title:"Meta-data",items:{type:"object",properties:{name:{type:"string",title:"Name","default":""},value:{type:"string",title:"Value","default":""},uom:{type:"string",title:"Measurement unit","default":""}}}}}}}}}},function(e,t){e.exports={"ui:order":["name","researchers","subjects","devices","software","other_resources","outputs"],name:{"ui:readonly":!0},researchers:{items:{id:{"ui:widget":"researcher"}}},subjects:{items:{id:{"ui:widget":"subject"}}},devices:{items:{id:{"ui:widget":"device"}}},software:{items:{id:{"ui:widget":"software"}}},other_resources:{items:{id:{"ui:widget":"output"}}},outputs:{items:{uri:{"ui:widget":"file"}}}}},function(e,t){e.exports={type:"object",required:["name","type","producer","uri"],properties:{name:{type:"string",title:"Name"},type:{type:"string",title:"Type"},producer:{type:"string",title:"Producer"},uri:{type:"string",title:"URI"}}}},function(e,t){e.exports={"ui:order":["name","type","producer","uri"]}},function(e,t){e.exports={type:"object",required:["name","surname","birthdate"],properties:{name:{type:"string",title:"Name"},surname:{type:"string",title:"Surname"},birthdate:{type:"string",title:"Birthdate"}}}},function(e,t){e.exports={"ui:order":["name","surname","birthdate"]}},function(e,t){e.exports={type:"object",required:["name","version","producer","uri"],properties:{name:{type:"string",title:"Name"},version:{type:"string",title:"Version"},producer:{type:"string",title:"Producer"},uri:{type:"string",title:"URI"}}}},function(e,t){e.exports={"ui:order":["name","version","producer","uri"]}},function(e,t){e.exports={type:"object",required:["owner_name","owner_surname","owner_deathdate","anatomical_region","anatomical_side"],properties:{owner_name:{type:"string",title:"Owner name"},owner_surname:{type:"string",title:"Owner surname"},owner_deathdate:{type:"string",title:"Owner deathdate"},anatomical_region:{type:"string",title:"Anatomical region"},anatomical_side:{type:"string",title:"Anatomical side","enum":["R","L"]}}}},function(e,t){e.exports={}},function(e,t){e.exports=require("autobahn")},function(e,t){e.exports=require("chance")},function(e,t){e.exports=require("intl")},function(e,t){e.exports=require("intl-locales-supported")},function(e,t){e.exports=require("intl/locale-data/jsonp/en")},function(e,t){e.exports=require("intl/locale-data/jsonp/fr")},function(e,t){e.exports=require("json-schema-to-mongoose")},function(e,t){e.exports=require("react-addons-update")},function(e,t){e.exports=require("react-bootstrap")},function(e,t){e.exports=require("react-intl/locale-data/en")},function(e,t){e.exports=require("react-intl/locale-data/fr")},function(e,t){e.exports=require("redux-thunk")},,,,,,,function(e,t){e.exports=require("react-select")},,,,,,,,,,function(e,t){e.exports=require("react-jsonschema-form")}]);