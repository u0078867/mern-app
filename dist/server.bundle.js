!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={},r={0:0};return t.e=function(t){if(0!==r[t]){var n=require("./"+t+".server.bundle.js"),o=n.modules,u=n.ids;for(var i in o)e[i]=o[i];for(var a=0;a<u.length;a++)r[u[a]]=0}return Promise.resolve()},t.m=e,t.c=n,t.p="",t.oe=function(e){throw console.error(e),e},t.oe=function(e){process.nextTick(function(){throw e})},t(t.s=87)}([function(e,t){e.exports=require("express")},function(e,t){e.exports=require("react")},function(e,t){e.exports=require("mongoose")},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={mongoURL:process.env.MONGO_URL||"mongodb://localhost:27017/mern-starter",port:process.env.PORT||8e3,workDir:process.env.WORK_DIR||"./upload"};t["default"]=n},function(e,t){e.exports=require("cuid")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"get",n=arguments[2];return(0,a["default"])(l+"/"+e,{headers:{"content-type":"application/json"},method:t,body:JSON.stringify(n)}).then(function(e){return e.json().then(function(t){return{json:t,response:e}})}).then(function(e){var t=e.json,n=e.response;return n.ok?t:Promise.reject(t)}).then(function(e){return e},function(e){return e})}function u(e){var t=new FormData;return t.append("file",e),(0,a["default"])(l+"/upload/file",{method:"POST",body:t}).then(function(e){return e.json().then(function(t){return{json:t,response:e}})}).then(function(e){var t=e.json,n=e.response;return n.ok?t:Promise.reject(t)}).then(function(e){return e},function(e){return e})}Object.defineProperty(t,"__esModule",{value:!0}),t.API_URL=void 0,t["default"]=o,t.uploadFile=u;var i=n(48),a=r(i),s=n(3),c=r(s),l=t.API_URL="undefined"==typeof window?process.env.BASE_URL||"http://localhost:"+(process.env.PORT||c["default"].port)+"/api":"/api"},function(e,t){e.exports=require("react-intl")},function(e,t){e.exports=require("react-redux")},function(e,t){e.exports=require("react-router")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),u=r(o),i=u["default"].Schema;"Subject"in u["default"].connection.models&&delete u["default"].connection.models.Subject;var a=new i({name:{type:"String",required:!0,index:!0},surname:{type:"String",required:!0,index:!0},birthdate:{type:"String",required:!0,index:!0},slug:{type:"String",required:!0},cuid:{type:"String",required:!0},dateAdded:{type:"Date","default":Date.now,required:!0}});a.index({"$**":"text"}),t["default"]=u["default"].model("Subject",a)},function(e,t){e.exports=require("limax")},function(e,t){e.exports=require("sanitize-html")},function(e,t){e.exports=require("pubsub-js")},function(e,t){e.exports=require("react-helmet")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),u=r(o),i=u["default"].Schema,a=i.ObjectId;"Activity"in u["default"].connection.models&&delete u["default"].connection.models.Activity;var s=new i({description:{type:"String",required:!0,index:!0},researchers:[{id:{type:a,required:!0,index:!0,ref:"Researcher"},_id:!1}],subjects:[{id:{type:a,required:!0,index:!0,ref:"Subject"},_id:!1}],devices:[{id:{type:a,required:!0,index:!0,ref:"Device"},_id:!1}],software:[{id:{type:a,required:!0,index:!0,ref:"SWTool"},_id:!1}],other_resources:[{id:{type:a,required:!0,index:!0},_id:!1}],outputs:[{_id:{type:a,required:!0,index:!0},cuid:{type:"String",required:!0,index:!0},name:{type:"String",required:!0,index:!0},uri:{type:"String",required:!1,index:!0}}],slug:{type:"String",required:!0},cuid:{type:"String",required:!0},date_added:{type:"Date","default":Date.now,required:!0}});s.index({"$**":"text"}),t["default"]=u["default"].model("Activity",s)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),u=r(o),i=u["default"].Schema;"Device"in u["default"].connection.models&&delete u["default"].connection.models.Device;var a=new i({name:{type:"String",required:!0,index:!0},type:{type:"String",required:!0,index:!0},slug:{type:"String",required:!0},cuid:{type:"String",required:!0},date_added:{type:"Date","default":Date.now,required:!0}});a.index({"$**":"text"}),t["default"]=u["default"].model("Device",a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),u=r(o),i=u["default"].Schema;"Researcher"in u["default"].connection.models&&delete u["default"].connection.models.Researcher;var a=new i({name:{type:"String",required:!0,index:!0},surname:{type:"String",required:!0,index:!0},birthdate:{type:"String",required:!0,index:!0},slug:{type:"String",required:!0},cuid:{type:"String",required:!0},date_added:{type:"Date","default":Date.now,required:!0}});a.index({"$**":"text"}),t["default"]=u["default"].model("Researcher",a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),u=r(o),i=u["default"].Schema;"SWTool"in u["default"].connection.models&&delete u["default"].connection.models.SWTool;var a=new i({name:{type:"String",required:!0,index:!0},version:{type:"String",required:!0,index:!0},company:{type:"String",required:!1,index:!0},download_uri:{type:"String",required:!0,index:!0},slug:{type:"String",required:!0},cuid:{type:"String",required:!0},date_added:{type:"Date","default":Date.now,required:!0}});a.index({"$**":"text"}),t["default"]=u["default"].model("SWTool",a)},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("react-dom/server")},function(e,t){"use strict";function n(){return{type:r}}Object.defineProperty(t,"__esModule",{value:!0}),t.toggleAddPost=n;var r=t.TOGGLE_ADD_POST="TOGGLE_ADD_POST"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.keys(e).reduce(function(n,r){var u=e[r],i=t?t+"."+r:r;return"string"==typeof u?n[i]=u:Object.assign(n,o(u,i)),n},{})}Object.defineProperty(t,"__esModule",{value:!0}),t.localizationData=t.enabledLanguages=void 0;var u=n(6),i=n(93),a=r(i),s=n(94),c=r(s);n(95);var l=n(99),d=r(l),f=n(56),p=r(f);n(96);var v=n(100),m=r(v),h=n(57),b=r(h),y=t.enabledLanguages=["en"],g=t.localizationData={};global.Intl?(0,c["default"])(y)||(global.Intl.NumberFormat=a["default"].NumberFormat,global.Intl.DateTimeFormat=a["default"].DateTimeFormat):global.Intl=a["default"],(0,u.addLocaleData)(d["default"]),g.en=p["default"],g.en.messages=o(g.en.messages),(0,u.addLocaleData)(m["default"]),g.fr=b["default"],g.fr.messages=o(g.fr.messages)},function(e,t,n){"use strict";function r(e){return o({type:i},u.localizationData[e])}Object.defineProperty(t,"__esModule",{value:!0}),t.SWITCH_LANGUAGE=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.switchLanguage=r;var u=n(21),i=t.SWITCH_LANGUAGE="SWITCH_LANGUAGE"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),u=r(o),i=u["default"].Schema;"Form"in u["default"].connection.models&&delete u["default"].connection.models.Form;var a=new i({title:{type:"String",required:!0},json_schema:{type:"Mixed",required:!0},ui_schema:{type:"Mixed",required:!0},init_data:{type:"Mixed",required:!0},slug:{type:"String",required:!0},cuid:{type:"String",required:!0},date_added:{type:"Date","default":Date.now,required:!0}},{minimize:!1});t["default"]=u["default"].model("Form",a)},function(e,t){e.exports=require("redux")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return a["default"].createElement(s.IntlProvider,e.intl,e.children)}function u(e){return{intl:e.intl}}Object.defineProperty(t,"__esModule",{value:!0}),t.IntlWrapper=o;var i=n(1),a=r(i),s=n(6),c=n(7);t["default"]=(0,c.connect)(u)(o)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var u=t&&t.defaultProps,i=arguments.length-3;if(n||0===i||(n={}),n&&u)for(var a in u)void 0===n[a]&&(n[a]=u[a]);else n||(n=u||{});if(1===i)n.children=o;else if(i>1){for(var s=Array(i),c=0;c<i;c++)s[c]=arguments[c+3];n.children=s}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),u=n(1),i=(r(u),n(8)),a=n(62),s=r(a);t["default"]=o(i.Route,{path:"/posts",component:s["default"]},void 0,o(i.IndexRoute,{getComponent:function(e,t){n.e(4)["catch"](function(e){n.oe(e)}).then(function(e){t(null,n(105)["default"])}.bind(null,n))}}),o(i.Route,{path:"/posts/:slug-:cuid",getComponent:function(e,t){n.e(6)["catch"](function(e){n.oe(e)}).then(function(e){t(null,n(104)["default"])}.bind(null,n))}}),o(i.Route,{path:"/",getComponent:function(e,t){n.e(1)["catch"](function(e){n.oe(e)}).then(function(e){t(null,n(103)["default"])}.bind(null,n))}}),o(i.Route,{path:"/forms/:slug-:cuid",getComponent:function(e,t){n.e(2)["catch"](function(e){n.oe(e)}).then(function(e){t(null,n(102)["default"])}.bind(null,n))}}),o(i.Route,{path:"/subms",getComponent:function(e,t){n.e(5)["catch"](function(e){n.oe(e)}).then(function(e){t(null,n(107)["default"])}.bind(null,n))}}),o(i.Route,{path:"/subms/:slug-:cuid",getComponent:function(e,t){n.e(3)["catch"](function(e){n.oe(e)}).then(function(e){t(null,n(106)["default"])}.bind(null,n))}}))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[(0,u.applyMiddleware)(a["default"])];process.env.CLIENT,1;var n=(0,u.createStore)(c["default"],e,u.compose.apply(void 0,t));return n}Object.defineProperty(t,"__esModule",{value:!0}),t.configureStore=o;var u=n(24),i=n(101),a=r(i),s=n(69),c=r(s)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return Promise.resolve().then(function(){return i["default"].count().exec()}).then(function(e){if(e>0)return void console.log("subjects collection was filled");console.log("filling subjects collection ...");for(var t=[],n=0;n<1e3;n++){var r=new i["default"]({name:x.first(),surname:x.last(),birthdate:x.birthday({string:!0}),slug:"test-subject",cuid:(0,_["default"])()});t.push(r)}return i["default"].create(t)}).then(function(){return console.log("subjects filled")}).then(function(){return s["default"].count().exec()}).then(function(e){if(e>0)return void console.log("researchers collection was filled");console.log("filling researchers collection ...");for(var t=[],n=0;n<1e3;n++){var r=new s["default"]({name:x.first(),surname:x.last(),birthdate:x.birthday({string:!0}),slug:"test-researcher",cuid:(0,_["default"])()});t.push(r)}return s["default"].create(t)}).then(function(){return console.log("researchers filled")}).then(function(){return l["default"].count().exec()}).then(function(e){if(e>0)return void console.log("devices collection was filled");console.log("filling devices collection ...");for(var t=[],n=["device-type-1","device-type-2","device-type-3","device-type-4","device-type-5"],r=0;r<50;r++){var o=new l["default"]({name:"device-"+x.word(),type:n[x.integer({min:0,max:n.length-1})],slug:"test-device",cuid:(0,_["default"])()});t.push(o)}return l["default"].create(t)}).then(function(){return console.log("devices filled")}).then(function(){return f["default"].count().exec()}).then(function(e){if(e>0)return void console.log("sw-tools collection was filled");console.log("filling sw-tools collection ...");for(var t=[],n=[{name:"software-A",company:"Micky Mouse Inc."},{name:"software-B",company:"Duffy Duck Ltd."},{name:"software-C",company:"Bla bla NV"},{name:"software-D"}],r=0;r<50;r++){var o=n[x.integer({min:0,max:n.length-1})],u={min:0,max:10},i=x.integer(u),a=x.integer(u),s=x.integer(u),c=i+"."+a+"."+s,l=new f["default"]({name:o.name,version:c,company:o.company,download_uri:x.url(),slug:"test-software",cuid:(0,_["default"])()});t.push(l)}return f["default"].create(t)}).then(function(){return console.log("sw-tools filled")}).then(function(){return v["default"].count().exec()}).then(function(t){return t>0?void console.log("activities collection was filled"):(console.log("filling activities collection ..."),Promise.all([(0,O["default"])("researchers"),(0,O["default"])("subjects"),(0,O["default"])("devices"),(0,O["default"])("sw-tools")]).then(function(e){var t=e.reduce(function(e,t){return Object.assign(e,t)},{});return t}).then(function(t){for(var n=[];n.length<1e4;){var r=n.length,o=[{id:P(t.researchers[x.integer({min:0,max:t.researchers.length-1})]._id)}],u=x.bool({likelihood:15}),i=[];u&&(i=[{id:P(t.subjects[x.integer({min:0,max:t.subjects.length-1})]._id)}]);for(var a=[],s=0;s<x.natural({min:1,max:5});s++)a.push({id:P(t.devices[x.integer({min:0,max:t.devices.length-1})]._id)});for(var c=[],l=0;l<x.natural({min:1,max:5});l++)c.push({id:P(t.SWTools[x.integer({min:0,max:t.SWTools.length-1})]._id)});for(var d=[],f=0;f<x.natural({min:1,max:5});f++)d.push({_id:P(),cuid:(0,_["default"])(),name:x.word(),uri:x.url()});var p=[];if(r>100&&!u){e&&console.log("linking activity "+r+" ...");for(var v=0,m=0;m<x.natural({min:1,max:3});m++){for(var h=0,b=!1;h<5;){var y=x.natural({min:1,max:5}),g=r-y;if(h++,g>=0&&n[g].subjects.length>0){b=!0;var S=n[g].outputs[x.integer({min:0,max:n[g].outputs.length-1})];p.push({id:S._id});break}}b&&v++,e&&console.log("link "+m+": attempts="+h+", src_has_sbj="+b)}if(0==v){e&&console.log("skipping activity "+r);continue}}var w={description:x.sentence(),researchers:o,subjects:i,devices:a,software:c,outputs:d,other_resources:p,slug:"test-activity",cuid:(0,_["default"])()};n.push(w)}return n}).then(function(e){return v["default"].create(e)}))}).then(function(){return console.log("activities filled")}).then(function(){return h["default"].count().exec()}).then(function(e){if(e>0)return void console.log("forms collection was filled");console.log("filling forms collection ...");var t=[],r={title:"sample lab activity",json_schema:n(88),ui_schema:n(89),init_data:{},slug:"sample-lab-activity",cuid:(0,_["default"])()};t.push(r);var o={title:"empty",json_schema:{},ui_schema:{},init_data:{},slug:"empty",cuid:(0,_["default"])()};return t.push(o),h["default"].create(t)}).then(function(){return console.log("forms filled")})}var u=n(9),i=r(u),a=n(16),s=r(a),c=n(15),l=r(c),d=n(17),f=r(d),p=n(14),v=r(p),m=n(23),h=r(m),b=n(2),y=r(b),g=n(4),_=r(g),S=n(91),w=r(S),j=n(5),O=r(j);y["default"].Promise=global.Promise;var P=y["default"].Types.ObjectId,x=new w["default"];e.exports=o},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var o=n(0),u=n(70),i=r(u),a=new o.Router;a.route("/devices").get(i.getDevices),a.route("/devices/:cuid").get(i.getDevice),e.exports=a},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var o=n(0),u=n(71),i=r(u),a=new o.Router;a.route("/devices").get(i.getDevices),e.exports=a},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var o=n(0),u=n(72),i=r(u),a=new o.Router;a.route("/forms").get(i.getForms),a.route("/forms/:cuid").get(i.getForm),a.route("/forms").post(i.addForm),a.route("/forms/:cuid").put(i.updateForm),a.route("/forms/:cuid")["delete"](i.deleteForm),e.exports=a},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var o=n(0),u=n(73),i=r(u),a=new o.Router;a.route("/outputs/:cuid").get(i.getOutput),e.exports=a},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var o=n(0),u=n(74),i=r(u),a=new o.Router;a.route("/outputs").get(i.getOutputs),e.exports=a},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var o=n(0),u=n(75),i=r(u),a=new o.Router;a.route("/posts").get(i.getPosts),a.route("/posts/:cuid").get(i.getPost),a.route("/posts").post(i.addPost),a.route("/posts/:cuid")["delete"](i.deletePost),e.exports=a},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var o=n(0),u=n(76),i=r(u),a=new o.Router;a.route("/researchers").get(i.getResearchers),a.route("/researchers/:cuid").get(i.getResearcher),e.exports=a},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var o=n(0),u=n(77),i=r(u),a=new o.Router;a.route("/researchers").get(i.getResearchers),e.exports=a},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var o=n(0),u=n(78),i=r(u),a=new o.Router;a.route("/subjects").get(i.getSubjects),a.route("/subjects/:cuid").get(i.getSubject),e.exports=a},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var o=n(0),u=n(79),i=r(u),a=new o.Router;a.route("/subjects").get(i.getSubjects),e.exports=a},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var o=n(0),u=n(80),i=r(u),a=new o.Router;a.route("/subms").get(i.getSubms),a.route("/subms/:cuid").get(i.getSubm),a.route("/subms").post(i.addSubm),a.route("/subms/:cuid").put(i.updateSubm),a.route("/subms/:cuid")["delete"](i.deleteSubm),e.exports=a},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var o=n(0),u=n(81),i=r(u),a=new o.Router;a.route("/sw-tools").get(i.getSWTools),a.route("/sw-tools/:cuid").get(i.getSWTool),e.exports=a},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var o=n(0),u=n(82),i=r(u),a=new o.Router;a.route("/sw-tools").get(i.getSWTools),e.exports=a},function(e,t,n){"use strict";var r=n(0),o=new r.Router;o.get("/msg",function(e,t){t.send("Test server server HMR")}),e.exports=o},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var o=n(0),u=n(83),i=r(u),a=new o.Router;a.route("/upload/file").post(i.uploadFile),a.route("/upload/data").post(i.uploadData),e.exports=a},function(e,t,n){"use strict";function r(e,t,n){var r=t.reduce(function(e,t){return(t.need||[]).concat((t.WrappedComponent&&t.WrappedComponent.need!==t.need?t.WrappedComponent.need:[])||[]).concat(e)},[]);return(0,o.sequence)(r,function(t){return e.dispatch(t(n,e.getState()))})}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchComponentData=r;var o=n(86)},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("compression")},function(e,t){e.exports=require("express-fileupload")},function(e,t){e.exports=require("isomorphic-fetch")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return{type:h,subm:e}}function u(e){return function(t){return(0,m["default"])("subms","post",{subm:e}).then(function(e){return t(o(e.subm))})}}function i(e){return{type:b,subms:e}}function a(){return function(e){return(0,m["default"])("subms").then(function(t){e(i(t.subms))})}}function s(e){return function(t){return(0,m["default"])("subms/"+e).then(function(e){return t(o(e.subm))})}}function c(e){return{type:y,cuid:e}}function l(e){return function(t){return(0,m["default"])("subms/"+e,"delete").then(function(){return t(c(e))})}}function d(e){return function(t){var n={target_collection:"to-implement",document:e.data};return(0,m["default"])("upload/data","post",n).then(function(){return t(l(e.cuid))})}}function f(e){return function(t){return(0,m["default"])("subms/"+e.cuid,"put",{subm:e}).then(function(e){return t(p(e.subm))})}}function p(e){return{type:g,subm:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.UPDATE_SUBM=t.ACCEPT_SUBM=t.DELETE_SUBM=t.ADD_SUBMS=t.ADD_SUBM=void 0,t.addSubm=o,t.addSubmRequest=u,t.addSubms=i,t.fetchSubms=a,t.fetchSubm=s,t.deleteSubm=c,t.deleteSubmRequest=l,t.acceptSubmRequest=d,t.updateSubmRequest=f,t.updateSubm=p;var v=n(5),m=r(v),h=t.ADD_SUBM="ADD_SUBM",b=t.ADD_SUBMS="ADD_SUBMS",y=t.DELETE_SUBM="DELETE_SUBM",g=(t.ACCEPT_SUBM="ACCEPT_SUBM",t.UPDATE_SUBM="UPDATE_SUBM")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return{type:b,form:e}}function u(e){return function(t){return(0,h["default"])("forms","post",{form:e}).then(function(e){return t(o(e.form))})}}function i(e){return{type:y,forms:e}}function a(){return function(e){return(0,h["default"])("forms").then(function(t){e(i(t.forms))})}}function s(e){return function(t){return(0,h["default"])("forms/"+e).then(function(e){return t(o(e.form))})}}function c(e){return{type:g,cuid:e}}function l(e){return function(t){return(0,h["default"])("forms/"+e,"delete").then(function(){return t(c(e))})}}function d(){return{type:_}}function f(e){return console.log("submiting"),function(t){return(0,h["default"])("form/upload/data","post",e)}}function p(e){return function(t){return(0,h["default"])("forms/"+e.cuid,"put",{form:e}).then(function(e){return t(v(e.form))})}}function v(e){return{type:S,form:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.UPDATE_FORM=t.SUBMIT_FORM=t.TOGGLE_ADD_FORM=t.DELETE_FORM=t.ADD_FORMS=t.ADD_FORM=void 0,t.addForm=o,t.addFormRequest=u,t.addForms=i,t.fetchForms=a,t.fetchForm=s,t.deleteForm=c,t.deleteFormRequest=l,t.toggleAddForm=d,t.submitForm=f,t.updateFormRequest=p,t.updateForm=v;var m=n(5),h=r(m),b=t.ADD_FORM="ADD_FORM",y=t.ADD_FORMS="ADD_FORMS",g=t.DELETE_FORM="DELETE_FORM",_=t.TOGGLE_ADD_FORM="TOGGLE_ADD_FORM",S=(t.SUBMIT_FORM="SUBMIT_FORM",t.UPDATE_FORM="UPDATE_FORM")},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getShowAddForm=t.getForm=t.getForms=void 0;var o=n(50),u={data:[],showAddForm:!1,submitted:[]},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments[1];switch(t.type){case o.ADD_FORM:return Object.assign({},e,{data:[t.form].concat(r(e.data))});case o.ADD_FORMS:return Object.assign({},e,{data:t.forms});case o.DELETE_FORM:return Object.assign({},e,{data:e.data.filter(function(e){return e.cuid!==t.cuid})});case o.TOGGLE_ADD_FORM:return Object.assign({},e,{showAddForm:!e.showAddForm});case o.SUBMIT_FORM:return Object.assign({},e,{submitted:[t.data].concat(r(e.submitted))});case o.UPDATE_FORM:return Object.assign({},e,{data:e.data.map(function(e){return e.cuid===t.form.cuid?t.form:e})});default:return e}};t.getForms=function(e){return e.forms.data},t.getForm=function(e,t){return e.forms.data.filter(function(e){return e.cuid===t})[0]},t.getShowAddForm=function(e){return e.forms.showAddForm};t["default"]=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return{type:p,post:e}}function u(e){return function(t){return(0,f["default"])("posts","post",{post:{name:e.name,title:e.title,content:e.content}}).then(function(e){return t(o(e.post))})}}function i(e){return{type:v,posts:e}}function a(){return function(e){return(0,f["default"])("posts").then(function(t){e(i(t.posts))})}}function s(e){return function(t){return(0,f["default"])("posts/"+e).then(function(e){return t(o(e.post))})}}function c(e){return{type:m,cuid:e}}function l(e){return function(t){return(0,f["default"])("posts/"+e,"delete").then(function(){return t(c(e))})}}Object.defineProperty(t,"__esModule",{value:!0}),t.DELETE_POST=t.ADD_POSTS=t.ADD_POST=void 0,t.addPost=o,t.addPostRequest=u,t.addPosts=i,t.fetchPosts=a,t.fetchPost=s,t.deletePost=c,t.deletePostRequest=l;var d=n(5),f=r(d),p=t.ADD_POST="ADD_POST",v=t.ADD_POSTS="ADD_POSTS",m=t.DELETE_POST="DELETE_POST"},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getPost=t.getPosts=void 0;var o=n(52),u={data:[]},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments[1];switch(t.type){case o.ADD_POST:return{data:[t.post].concat(r(e.data))};case o.ADD_POSTS:return{data:t.posts};case o.DELETE_POST:return{data:e.data.filter(function(e){return e.cuid!==t.cuid})};default:return e}};t.getPosts=function(e){return e.posts.data},t.getPost=function(e,t){return e.posts.data.filter(function(e){return e.cuid===t})[0]};t["default"]=i},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getSubm=t.getSubms=void 0;var o=n(49),u={data:[]},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments[1];switch(t.type){case o.ADD_SUBM:return Object.assign({},e,{data:[t.subm].concat(r(e.data))});case o.ADD_SUBMS:return Object.assign({},e,{data:t.subms});case o.DELETE_SUBM:return Object.assign({},e,{data:e.data.filter(function(e){return e.cuid!==t.cuid})});case o.ACCEPT_SUBM:return Object.assign({},e,{});case o.UPDATE_SUBM:return Object.assign({},e,{data:e.data.map(function(e){return e.cuid===t.subm.cuid?t.subm:e})});default:return e}};t.getSubms=function(e){return e.subms.data},t.getSubm=function(e,t){return e.subms.data.filter(function(e){return e.cuid===t})[0]};t["default"]=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getShowAddPost=void 0;var r=n(20),o={showAddPost:!1},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case r.TOGGLE_ADD_POST:return{showAddPost:!e.showAddPost};default:return e}};t.getShowAddPost=function(e){return e.app.showAddPost};t["default"]=u},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={locale:"en",messages:{save:"Save",siteTitle:"MERN App",addPost:"Add Post",switchLanguage:"Switch Language",twitterMessage:"We are on Twitter",by:"By",deletePost:"Delete Post",createNewPost:"Create new post",authorName:"Author's Name",postTitle:"Post Title",postContent:"Post Content",submit:"Submit",comment:"user {name} {value, plural,\n    \t  =0 {does not have any comments}\n    \t  =1 {has # comment}\n    \t  other {has # comments}\n    \t}",HTMLComment:"user <b style='font-weight: bold'>{name} </b> {value, plural,\n    \t  =0 {does not have <i style='font-style: italic'>any</i> comments}\n    \t  =1 {has <i style='font-style: italic'>#</i> comment}\n    \t  other {has <i style='font-style: italic'>#</i> comments}\n    \t}",nestedDateComment:"user {name} {value, plural,\n    \t  =0 {does not have any comments}\n    \t  =1 {has # comment}\n    \t  other {has # comments}\n    \t} as of {date}",addForm:"Add Form",editForm:"Edit Form",deleteForm:"Delete Form",createNewForm:"Create new form",formTitle:"Form Title",formJSONSchema:"Form JSON Schema",formUISchema:"Form UI Schema",formInitData:"Form initial data",formPreview:"Form preview",acceptSubm:"Accept Submission",deleteSubm:"Delete Submission"}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={locale:"fr",messages:{siteTitle:"MERN blog de démarrage",addPost:"Ajouter Poster",switchLanguage:"Changer de langue",twitterMessage:"Nous sommes sur Twitter",by:"Par",deletePost:"Supprimer le message",createNewPost:"Créer un nouveau message",authorName:"Nom de l'auteur",postTitle:"Titre de l'article",postContent:"Contenu après",submit:"Soumettre",comment:"user {name} {value, plural,\n    \t  =0 {does not have any comments}\n    \t  =1 {has # comment}\n    \t  other {has # comments}\n    \t} (in real app this would be translated to French)",HTMLComment:"user <b style='font-weight: bold'>{name} </b> {value, plural,\n    \t  =0 {does not have <i style='font-style: italic'>any</i> comments}\n    \t  =1 {has <i style='font-style: italic'>#</i> comment}\n    \t  other {has <i style='font-style: italic'>#</i> comments}\n    \t} (in real app this would be translated to French)",nestedDateComment:"user {name} {value, plural,\n  \t\t  =0 {does not have any comments}\n  \t\t  =1 {has # comment}\n  \t\t  other {has # comments}\n  \t\t} as of {date} (in real app this would be translated to French)"}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var u=t&&t.defaultProps,i=arguments.length-3;if(n||0===i||(n={}),n&&u)for(var a in u)void 0===n[a]&&(n[a]=u[a]);else n||(n=u||{});if(1===i)n.children=o;else if(i>1){for(var s=Array(i),c=0;c<i;c++)s[c]=arguments[c+3];n.children=s}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),l=r(c),d=n(12),f=r(d),p="",v={},m=!0,h=1e3,b=10,y=!0,g=!1,_=a("b",{},void 0,"Buffer size:"),S=a("b",{},void 0,"Current buffered frames:"),w=a("b",{},void 0,"Single package digest interval (ms):"),j=a("b",{},void 0,"Content:"),O=a("b",{},void 0,a("i",{},void 0,"--In-port--")),P=a("b",{},void 0,"Port"),x=a("b",{},void 0,"Buffered:"),M=function(e){function t(e){o(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={bufferLength:0},n.digestSinglePackage=n.digestSinglePackage.bind(n),n.handleNewPackage=n.handleNewPackage.bind(n),n.buffer=[],n.digestLoop=null,n._isMounted=!1,n}return i(t,e),s(t,[{key:"render",value:function(){var e=void 0;this.props.buffered&&(e=a("div",{},void 0,a("div",{},void 0,_," ",this.props.maxBufferSize),a("div",{},void 0,S," ",this.state.bufferLength),a("div",{},void 0,w," ",this.props.digestInterval)));
var t=void 0;return this.props.showContent&&(t=a("div",{},void 0,a("div",{},void 0,j," ",JSON.stringify(this.props.data.data)))),a("div",{},void 0,O,a("div",{},void 0,P," ",this.props.port),a("div",{},void 0,x," ",this.props.buffered?"true":"false"),e,t)}},{key:"componentDidMount",value:function(){this.props.buffered&&(this.digestLoop=setInterval(this.digestSinglePackage,this.props.digestInterval)),this._isMounted=!0}},{key:"componentWillUpdate",value:function(e,t){}},{key:"componentWillUnmount",value:function(){this.props.buffered&&clearInterval(this.digestLoop),this._isMounted=!1}},{key:"componentWillReceiveProps",value:function(e){0!=Object.keys(e.data).length&&(this.props.data!=e.data&&this.handleNewPackage(e.data,e.port,e.buffered,e.maxBufferSize,e.send),e.buffered!=this.props.buffered&&(e.buffered?this.digestLoop=setInterval(this.digestSinglePackage,e.digestInterval):(clearInterval(this.digestLoop),this.buffer=[])),e.digestInterval!=this.props.digestInterval&&e.buffered&&this.props.buffered&&(clearInterval(this.digestLoop),this.digestLoop=setInterval(this.digestSinglePackage,e.digestInterval)))}},{key:"handleNewPackage",value:function(e,t,n,r,o){if(n)for(var u=0;u<e.data.length;u++)this.buffer.push(e.data[u]),this.buffer.length>r&&this.buffer.shift(),this.setState({bufferLength:this.buffer.length});else""!=t&&o&&f["default"].publishSync(t,e.data)}},{key:"digestSinglePackage",value:function(){if(""!=this.props.port){if(0==this.buffer.length)return;var e=this.buffer.shift();this.setState({bufferLength:this.buffer.length}),this.props.send&&f["default"].publishSync(this.props.port,[e])}}}]),t}(l["default"].Component);M.defaultProps={port:p,data:v,buffered:m,maxBufferSize:h,digestInterval:b,send:y,showContent:g},t["default"]=M},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var u=t&&t.defaultProps,i=arguments.length-3;if(n||0===i||(n={}),n&&u)for(var a in u)void 0===n[a]&&(n[a]=u[a]);else n||(n=u||{});if(1===i)n.children=o;else if(i>1){for(var s=Array(i),c=0;c<i;c++)s[c]=arguments[c+3];n.children=s}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),l=r(c),d=n(12),f=r(d),p=null,v="port",m=function(e){},h=function(e){function t(e){o(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={data:p},n.token=null,n.recursiveCloneChildren=n.recursiveCloneChildren.bind(n),n._isMounted=!1,n}return i(t,e),s(t,[{key:"render",value:function(){return a("div",{},void 0,this.recursiveCloneChildren(this.props.children))}},{key:"recursiveCloneChildren",value:function(e){var t=this;return l["default"].Children.map(e,function(e){var n={};return l["default"].isValidElement(e)?(t.props.propagateDataToChildren&&null!=t.state.data&&(n={data:t.state.data}),n.children=t.recursiveCloneChildren(e.props.children),l["default"].cloneElement(e,n)):e})}},{key:"componentDidMount",value:function(){this.setUpNewDataInConnection(this.props.dataInPort),this._isMounted=!0}},{key:"componentWillUnmount",value:function(){null!=this.token&&(f["default"].unsubscribe(this.token),this.token=null),this._isMounted=!1}},{key:"componentWillUpdate",value:function(e){var t=e.dataInPort;t!=this.props.dataInPort&&this.setUpNewDataInConnection(t)}},{key:"setUpNewDataInConnection",value:function(e){var t=this;null!=this.token&&(f["default"].unsubscribe(this.token),this.token=null),""!=e&&(this.token=f["default"].subscribe(e,function(e,n){t._isMounted&&(t.setState({data:n}),t.props.receiveCallback(n))}))}}]),t}(l["default"].Component);h.defaultProps={dataInPort:v,receiveCallback:m,propagateDataToChildren:!0},t["default"]=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var u=t&&t.defaultProps,i=arguments.length-3;if(n||0===i||(n={}),n&&u)for(var a in u)void 0===n[a]&&(n[a]=u[a]);else n||(n=u||{});if(1===i)n.children=o;else if(i>1){for(var s=Array(i),c=0;c<i;c++)s[c]=arguments[c+3];n.children=s}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),l=r(c),d=n(12),f=r(d),p="",v=function(e){},m=a("b",{},void 0,a("i",{},void 0,"--Out-port--")),h=a("b",{},void 0,"Port: "),b=function(e){function t(e){o(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.token=null,n}return i(t,e),s(t,[{key:"render",value:function(){return a("div",{},void 0,m,a("div",{},void 0,h,this.props.port))}},{key:"componentDidMount",value:function(){this.setUpNewDataOutConnection(this.props.port)}},{key:"componentWillUpdate",value:function(e,t){this.props.port!=e.port&&this.setUpNewDataOutConnection(e.port)}},{key:"setUpNewDataOutConnection",value:function(e){var t=this;null!=this.token&&f["default"].unsubscribe(this.token),this.token=f["default"].subscribe(e,function(n,r){t.props.sendCallback(e,r)})}}]),t}(l["default"].Component);b.defaultProps={port:p,sendCallback:v},t["default"]=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var u=t&&t.defaultProps,i=arguments.length-3;if(n||0===i||(n={}),n&&u)for(var a in u)void 0===n[a]&&(n[a]=u[a]);else n||(n=u||{});if(1===i)n.children=o;else if(i>1){for(var s=Array(i),c=0;c<i;c++)s[c]=arguments[c+3];n.children=s}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),l=r(c),d=n(97),f=(r(d),n(90)),p=r(f),v=!1,m="",h="",b="status",y=a("b",{},void 0,"Url:"),g=a("b",{},void 0,"Realm:"),_=function(e){function t(e){o(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.tearDownConnection=function(){null!=n.connection&&(n.connection.close(),n.connection=null,n.session=null)},n.setUpNewConnection=function(e,t){n.tearDownConnection(),""!=e&&""!=t&&(n.connection=new p["default"].Connection({url:e,realm:t}),n.connection.onopen=function(e,t){n.session=e,l["default"].Children.map(n.props.children,function(t){if(l["default"].isValidElement(t)){var r=t.type.name;if("InPort"==r){var o=t.props.port;e.subscribe(o,function(e){n.props.onData(o,e[0])}).then(function(e){console.log("WAMP socket subscribed to topic "+o),o==n.props.statusInPort&&n.props.onData(o,{data:"WAMP connected"})},function(e){console.log("WAMP socket not subscribed to topic "+o+": "+e)})}}})},n.connection.onclose=function(e,t){console.log("WAMP socket disconnected"),n.props.onData(n.props.statusInPort,{data:"WAMP diconnected"})},n.connection.open())},n.handleSend=function(e,t){null!=n.connection&&null!=n.session&&n.session.publish(e,[t])},n.state={},n.connection=null,n.session=null,n}return i(t,e),s(t,[{key:"render",value:function(){return a("div",{},void 0,a("div",{},void 0,y," ",this.props.url),a("div",{},void 0,g," ",this.props.realm),this.props.children)}},{key:"componentDidMount",value:function(){this.props.enabled&&this.setUpNewConnection(this.props.url,this.props.realm)}},{key:"componentWillUpdate",value:function(e,t){var n=e.url,r=e.realm;if(e.enabled&&!this.props.enabled&&this.setUpNewConnection(n,r),!e.enabled&&this.props.enabled&&this.tearDownConnection(),n==this.props.url&&r==this.props.realm||e.enabled&&this.setUpNewConnection(n,r),e.data!=this.props.data){var o=e.data.port,u=e.data.data;this.handleSend(o,u)}}}]),t}(l["default"].Component);_.defaultProps={enabled:v,url:m,realm:h,statusInPort:b},t["default"]=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return{intl:e.intl}}Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var u=t&&t.defaultProps,i=arguments.length-3;if(n||0===i||(n={}),n&&u)for(var a in u)void 0===n[a]&&(n[a]=u[a]);else n||(n=u||{});if(1===i)n.children=o;else if(i>1){for(var s=Array(i),c=0;c<i;c++)s[c]=arguments[c+3];n.children=s}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),d=r(l),f=n(7),p={container:"_15uqt7TaQcflNYjiD0-re1"},v=r(p),m=n(13),h=r(m),b=n(64),y=r(b),g=n(63),_=r(g),S=n(65),w=r(S),j=n(66),O=r(j),P=n(67),x=r(P),M=n(20),D=n(22),A=s(O["default"],{}),T=s(_["default"],{}),R=t.App=function(e){function t(e){o(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleAddPostSection=function(){n.props.dispatch((0,M.toggleAddPost)())},n.redirectToForm=function(e){n.context.router.push("/forms/"+e)},n.state={isMounted:!1},n}return i(t,e),c(t,[{key:"componentDidMount",value:function(){console.log("<App> module mounted"),this.setState({isMounted:!0})}},{key:"render",value:function(){var e=this;return s("div",{},void 0,s("div",{},void 0,s(h["default"],{title:"Activity logging app",titleTemplate:"%s",meta:[{charset:"utf-8"},{"http-equiv":"X-UA-Compatible",content:"IE=edge"},{name:"viewport",content:"width=device-width, initial-scale=1"}]}),s(y["default"],{switchLanguage:function(t){return e.props.dispatch((0,D.switchLanguage)(t))},intl:this.props.intl,toggleAddPost:this.toggleAddPostSection},void 0,s(w["default"],{data:[{label:"WAMP connection"},{label:"Work-flow client"}]},void 0,A,s(x["default"],{onEnterTask:this.redirectToForm}))),s("div",{className:v["default"].container},void 0,this.props.children),T))}}]),t}(l.Component);R.contextTypes={router:d["default"].PropTypes.object.isRequired},t["default"]=(0,f.connect)(a)(R)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){return u("div",{style:{background:"#FFF url("+l["default"]+") center"},className:s["default"].footer},void 0)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var u=t&&t.defaultProps,i=arguments.length-3;if(n||0===i||(n={}),n&&u)for(var a in u)void 0===n[a]&&(n[a]=u[a]);else n||(n=u||{});if(1===i)n.children=o;else if(i>1){for(var s=Array(i),c=0;c<i;c++)s[c]=arguments[c+3];n.children=s}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}();t.Footer=o;var i=n(1),a=(r(i),n(6),{footer:"_1oiRVDtQ6fOWkhBVWcRyE_"}),s=r(a),c="/bbaeb5f32b7042f0def39648a1d111b9.png",l=r(c);t["default"]=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n=e.intl.enabledLanguages.map(function(t){return u("li",{onClick:function(){return e.switchLanguage(t)},className:t===e.intl.locale?d["default"].selected:""},t,t)}),r=[{name:"Forms",url:"/"},{name:"Submissions",url:"/subms"}];return u("div",{className:d["default"].header},void 0,u("div",{className:d["default"]["language-switcher"]},void 0,u("ul",{},void 0,f,n)),u("div",{className:d["default"].content},void 0,e.children),u("div",{className:d["default"]["panel-switcher"]},void 0,u("ul",{},void 0,r.map(function(e){return u("li",{},e.name,u(s.Link,{to:e.url},void 0,e.name))}))))}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var u=t&&t.defaultProps,i=arguments.length-3;if(n||0===i||(n={}),n&&u)for(var a in u)void 0===n[a]&&(n[a]=u[a]);else n||(n=u||{});if(1===i)n.children=o;else if(i>1){for(var s=Array(i),c=0;c<i;c++)s[c]=arguments[c+3];n.children=s}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}();t.Header=o;var i=n(1),a=r(i),s=n(8),c=n(6),l={header:"_3EGjKVGKCGTGQn_m_YASdF",content:"_391cv5n_RFU0K9SBOjXDEt","site-title":"_11V45Tl3_Hdy_ARI53CW9g","add-post-button":"XrNjmGRHH_vMEgGeC3S75","language-switcher":"X6vAu1vEuRDWiN2kDvA_z","panel-switcher":"_2I4ryUD_rnJMRXpUrwIASM",selected:"_3ecuVjN6tTUWkR7u3Co3s"},d=r(l),f=u("li",{},void 0,u(c.FormattedMessage,{id:"switchLanguage"}));o.contextTypes={router:a["default"].PropTypes.object},t["default"]=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var u=t&&t.defaultProps,i=arguments.length-3;if(n||0===i||(n={}),n&&u)for(var a in u)void 0===n[a]&&(n[a]=u[a]);else n||(n=u||{});if(1===i)n.children=o;else if(i>1){for(var s=Array(i),c=0;c<i;c++)s[c]=arguments[c+3];n.children=s}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),l=r(c),d=n(98),f=function(e){function t(){return o(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this;return a("div",{},void 0,a(d.Tabs,{defaultActiveKey:1,id:"services",animation:!1},void 0,l["default"].Children.toArray(this.props.children).map(function(t,n){return a(d.Tab,{eventKey:n+1,title:e.props.data[n].label,unmountOnExit:!1},n,t)})))}}]),t}(l["default"].Component);t["default"]=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var u=t&&t.defaultProps,i=arguments.length-3;if(n||0===i||(n={}),n&&u)for(var a in u)void 0===n[a]&&(n[a]=u[a]);else n||(n=u||{});if(1===i)n.children=o;else if(i>1){for(var s=Array(i),c=0;c<i;c++)s[c]=arguments[c+3];n.children=s}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),d=(r(l),n(58)),f=r(d),p=n(60),v=r(p),m=n(61),h=r(m),b={summary:"_3jmTs_lW1oh4UoohJUunV9",inputs:"_2zMoFx1oFaecwO6hZthKlO","pos-right":"_1cYLihHSfKN6MUiYMdbHvX","pos-left":"_2yGCNyJ_vsu0seE2QGnFmC"},y=r(b),g=s("td",{},void 0,"Url:"),_=s("td",{},void 0,"Realm:"),S=s("td",{},void 0,"Enabled:"),w=function(e){function t(e){u(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setUrlStream=function(e){var t=e.target.value;n.setState({urlStream:t})},n.setRealmStream=function(e){var t=e.target.value;n.setState({realmStream:t})},n.setEnabled=function(e){var t=e.target.checked;n.setState({enabled:t})},n.onData=function(e,t){n.setState(o({},e,t))},n.sendCallback=function(e,t){n.setState({socketData:{port:e,data:t}})},n.state={urlStream:"ws://127.0.0.1:8002/ws",realmStream:"realm1",enabled:!1},n}return a(t,e),c(t,[{key:"render",value:function(){return s("div",{},void 0,s("div",{className:y["default"]["pos-left"]},void 0,s("div",{className:y["default"].inputs},void 0,s("table",{},void 0,s("tbody",{},void 0,s("tr",{},void 0,g,s("td",{},void 0,s("input",{type:"text",value:this.state.urlStream,onChange:this.setUrlStream}))),s("tr",{},void 0,_,s("td",{},void 0,s("input",{type:"text",value:this.state.realmStream,onChange:this.setRealmStream}))),s("tr",{},void 0,S,s("td",{},void 0,s("input",{type:"checkbox",checked:this.state.enabled,onChange:this.setEnabled}))))))),s("div",{className:y["default"]["pos-right"]},void 0,s("div",{className:y["default"].summary},void 0,s(h["default"],{enabled:this.state.enabled,url:this.state.urlStream,realm:this.state.realmStream,statusInPort:"ws-status",onData:this.onData,data:this.state.socketData},void 0,s(f["default"],{port:"ws-status",data:this.state["ws-status"],buffered:!1,showContent:!0}),s(f["default"],{port:"wf-task-enter",data:this.state["wf-task-enter"],buffered:!1,showContent:!0}),s(v["default"],{port:"wf-task-exit",sendCallback:this.sendCallback})))))}}]),t}(l.Component);t["default"]=w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var u=t&&t.defaultProps,i=arguments.length-3;if(n||0===i||(n={}),n&&u)for(var a in u)void 0===n[a]&&(n[a]=u[a]);else n||(n=u||{});if(1===i)n.children=o;else if(i>1){for(var s=Array(i),c=0;c<i;c++)s[c]=arguments[c+3];n.children=s}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),l=(r(c),n(59)),d=r(l),f={summary:"_2K51-6AHP9r6v2gtCME-I6",inputs:"_2HnMeZvRC20NHJRawOYMUF","pos-right":"OpFVwf7KS55QVrkBfXIYG","pos-left":"_3tZrrcIjzK-lY_8GXnIrn4"},p=r(f),v=a("tr",{},void 0,a("td",{},void 0,"Listening on port:"),a("td",{},void 0,"wf-task-enter")),m=a("td",{},void 0,"Enabled:"),h=function(e){function t(e){o(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleReceiveMessage=function(e){n.state.enabled&&n.props.onEnterTask(e)},n.setEnabled=function(e){var t=e.target.checked;n.setState({enabled:t})},n.state={enabled:!1},n}return i(t,e),s(t,[{key:"render",value:function(){return a("div",{},void 0,a("div",{className:p["default"]["pos-left"]},void 0,a("div",{className:p["default"].inputs},void 0,a("table",{},void 0,a("tbody",{},void 0,v,a("tr",{},void 0,m,a("td",{},void 0,a("input",{type:"checkbox",checked:this.state.enabled,onChange:this.setEnabled}))))))),a(d["default"],{dataInPort:"wf-task-enter",receiveCallback:this.handleReceiveMessage}))}}]),t}(c.Component);t["default"]=h},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(21),i=n(22),a=global.navigator&&global.navigator.language||"en",s=o({locale:a,enabledLanguages:u.enabledLanguages},u.localizationData[a]||{}),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case i.SWITCH_LANGUAGE:var n=(t.type,r(t,["type"]));return o({},e,n);default:return e}};t["default"]=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(24),u=n(55),i=r(u),a=n(53),s=r(a),c=n(51),l=r(c),d=n(54),f=r(d),p=n(68),v=r(p);t["default"]=(0,o.combineReducers)({app:i["default"],posts:s["default"],forms:l["default"],subms:f["default"],intl:v["default"]})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){a["default"].find().exec(function(e,n){return e?t.status(500).send(e):void t.json({devices:n})})}function u(e,t){a["default"].findOne({cuid:e.params.cuid}).exec(function(e,n){return e?t.status(500).send(e):void t.json({device:n})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getDevices=o,t.getDevice=u;var i=n(15),a=r(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n=e.query.q;n=n.replace(/\+/g," "),s["default"].find({$text:{$search:n}}).exec(function(e,n){return e?t.status(500).send(e):void t.json({devices:n})})}function u(e,t){var n=e.query.q;n=n.replace(/\+/g," ");var r=new RegExp(n,"i");s["default"].find({$or:[{name:r},{type:r}]}).exec(function(e,n){return e?t.status(500).send(e):void t.json({devices:n})})}function i(e,t){var n=e.query.q,r="("+n.trim().replace(/\s+/g,"|")+")",o=new RegExp(r,"i");s["default"].find({$or:[{$text:{$search:n}},{name:o},{type:o}]},{score:{$meta:"textScore"}}).sort({score:{$meta:"textScore"}}).exec(function(e,n){return e?t.status(500).send(e):void t.json({devices:n})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getDevicesTextSearch=o,t.getDevicesRegex=u,t.getDevices=i;var a=n(15),s=r(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){l["default"].find().sort("-date_added").exec(function(e,n){return e?t.status(500).send(e):void t.json({forms:n})})}function u(e,t){if(!(e.body.form.title&&e.body.form.json_schema&&e.body.form.ui_schema&&e.body.form.init_data))return t.status(403).end();var n=new l["default"](e.body.form);n.title=(0,h["default"])(n.title),n.slug=(0,v["default"])(n.title.toLowerCase(),{lowercase:!0}),n.cuid=(0,f["default"])(),n.save(function(e,n){return e?t.status(500).send(e):void t.json({form:n})})}function i(e,t){l["default"].findOne({cuid:e.params.cuid}).exec(function(e,n){return e?t.status(500).send(e):void t.json({form:n})})}function a(e,t){l["default"].findOne({cuid:e.params.cuid}).exec(function(e,n){return e?t.status(500).send(e):void n.remove(function(){t.status(200).end()})})}function s(e,t){l["default"].findOneAndUpdate({cuid:e.params.cuid},{$set:e.body.form},{"new":!0}).exec(function(e,n){return e?t.status(500).send(e):void t.json({form:n})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getForms=o,t.addForm=u,t.getForm=i,t.deleteForm=a,t.updateForm=s;var c=n(23),l=r(c),d=n(4),f=r(d),p=n(10),v=r(p),m=n(11),h=r(m),b=n(3);r(b)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){a["default"].aggregate([{$unwind:"$outputs"}]).exec(function(e,n){return e?t.status(500).send(e):void t.json({outputs:n})})}function u(e,t){a["default"].aggregate([{$match:{"outputs.cuid":e.params.cuid}},{$unwind:"$outputs"},{$match:{"outputs.cuid":e.params.cuid}},{$addFields:{output:"$outputs"}},{$project:{outputs:0}},{$addFields:{"output.activity":"$$CURRENT"}},{$replaceRoot:{newRoot:"$output"}},{$project:{"activity.output":0}}]).exec(function(e,n){if(e)return t.status(500).send(e);var r=void 0;n&&(r=n[0]),t.json({output:r})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getOutputs=o,t.getOutput=u;var i=n(14),a=r(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n=e.query.q,r="("+n.trim().replace(/\s+/g,"|")+")",o=new RegExp(r,"i"),u=n.trim().split(" ").reduce(function(e,t){return e&&t.length>=3},!0);return u?void s["default"].find({$or:[{$text:{$search:n}},{name:o},{surname:o},{birthdate:o}]}).exec().then(function(e){return e.map(function(e){return c(e.id)})}).then(function(e){return i["default"].aggregate([{$match:{$or:[{$text:{$search:n}},{description:o},{"outputs.name":o},{"outputs.uri":o},{"subjects.id":{$in:e}}]}},{$addFields:{score:{$meta:"textScore"}}},{$graphLookup:{from:"activities",startWith:"$other_resources.id",connectFromField:"other_resources.id",connectToField:"outputs._id",as:"prev"}},{$unwind:{path:"$prev",preserveNullAndEmptyArrays:!0}},{$unwind:{path:"$prev.subjects",preserveNullAndEmptyArrays:!0}},{$addFields:{sbj_prev_involved:{$cond:{"if":{$in:["$prev.subjects.id",e]},then:1,"else":0}}}},{$sort:{score:{$meta:"textScore"},sbj_prev_involved:-1}},{$unwind:"$outputs"},{$addFields:{output:"$outputs"}},{$project:{outputs:0}},{$addFields:{"output.activity":"$$CURRENT"}},{$replaceRoot:{newRoot:"$output"}},{$project:{"activity.output":0}}]).exec()}).then(function(e){return i["default"].populate(e,{path:"activity.subjects.id",model:"Subject"})}).then(function(e){return i["default"].populate(e,{path:"activity.prev.subjects.id",model:"Subject"})}).then(function(e){t.json({outputs:e})})["catch"](function(e){t.status(500).send(e)}):t.json({outputs:[]})}Object.defineProperty(t,"__esModule",{value:!0}),t.getOutputs=o;var u=n(14),i=r(u),a=n(9),s=r(a),c=n(2).Types.ObjectId},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){c["default"].find().sort("-dateAdded").exec(function(e,n){return e?t.status(500).send(e):void t.json({posts:n})})}function u(e,t){if(!e.body.post.name||!e.body.post.title||!e.body.post.content)return t.status(403).end();var n=new c["default"](e.body.post);n.title=(0,m["default"])(n.title),n.name=(0,m["default"])(n.name),n.content=(0,m["default"])(n.content),n.slug=(0,p["default"])(n.title.toLowerCase(),{lowercase:!0}),n.cuid=(0,d["default"])(),n.save(function(e,n){return e?t.status(500).send(e):void t.json({post:n})})}function i(e,t){c["default"].findOne({cuid:e.params.cuid}).exec(function(e,n){return e?t.status(500).send(e):void t.json({post:n})})}function a(e,t){c["default"].findOne({cuid:e.params.cuid}).exec(function(e,n){return e?t.status(500).send(e):void n.remove(function(){t.status(200).end()})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getPosts=o,t.addPost=u,t.getPost=i,t.deletePost=a;var s=n(84),c=r(s),l=n(4),d=r(l),f=n(10),p=r(f),v=n(11),m=r(v)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){a["default"].find().exec(function(e,n){return e?t.status(500).send(e):void t.json({researchers:n})})}function u(e,t){a["default"].findOne({cuid:e.params.cuid}).exec(function(e,n){return e?t.status(500).send(e):void t.json({researcher:n})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getResearchers=o,t.getResearcher=u;var i=n(16),a=r(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n=e.query.q;n=n.replace(/\+/g," "),s["default"].find({$text:{$search:n}}).exec(function(e,n){return e?t.status(500).send(e):void t.json({researchers:n})})}function u(e,t){var n=e.query.q;n=n.replace(/\+/g," ");var r=new RegExp(n,"i");s["default"].find({$or:[{name:r},{surname:r},{birthdate:r}]}).exec(function(e,n){return e?t.status(500).send(e):void t.json({researchers:n})})}function i(e,t){var n=e.query.q,r="("+n.trim().replace(/\s+/g,"|")+")",o=new RegExp(r,"i");s["default"].find({$or:[{$text:{$search:n}},{name:o},{surname:o},{birthdate:o}]},{score:{$meta:"textScore"}}).sort({score:{$meta:"textScore"}}).exec(function(e,n){return e?t.status(500).send(e):void t.json({researchers:n})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getResearchersTextSearch=o,t.getResearchersRegex=u,t.getResearchers=i;var a=n(16),s=r(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){a["default"].find().exec(function(e,n){return e?t.status(500).send(e):void t.json({
subjects:n})})}function u(e,t){a["default"].findOne({cuid:e.params.cuid}).exec(function(e,n){return e?t.status(500).send(e):void t.json({subject:n})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getSubjects=o,t.getSubject=u;var i=n(9),a=r(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n=e.query.q;n=n.replace(/\+/g," "),s["default"].find({$text:{$search:n}}).exec(function(e,n){return e?t.status(500).send(e):void t.json({subjects:n})})}function u(e,t){var n=e.query.q;n=n.replace(/\+/g," ");var r=new RegExp(n,"i");s["default"].find({$or:[{name:r},{surname:r},{birthdate:r}]}).exec(function(e,n){return e?t.status(500).send(e):void t.json({subjects:n})})}function i(e,t){var n=e.query.q,r="("+n.trim().replace(/\s+/g,"|")+")",o=new RegExp(r,"i");s["default"].find({$or:[{$text:{$search:n}},{name:o},{surname:o},{birthdate:o}]},{score:{$meta:"textScore"}}).sort({score:{$meta:"textScore"}}).exec(function(e,n){return e?t.status(500).send(e):void t.json({subjects:n})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getSubjectsTextSearch=o,t.getSubjectsRegex=u,t.getSubjects=i;var a=n(9),s=r(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){l["default"].find().sort("-date_added").populate("form").exec(function(e,n){return e?t.status(500).send(e):void t.json({subms:n})})}function u(e,t){if(!e.body.subm.form||!e.body.subm.data)return t.status(403).end();var n=new l["default"](e.body.subm);console.log(n.data),n.slug="submission",n.cuid=(0,f["default"])(),n.save(function(e,n){return e?t.status(500).send(e):void t.json({subm:n})})}function i(e,t){l["default"].findOne({cuid:e.params.cuid}).populate("form").exec(function(e,n){return e?t.status(500).send(e):void t.json({subm:n})})}function a(e,t){l["default"].findOne({cuid:e.params.cuid}).exec(function(e,n){return e?t.status(500).send(e):void n.remove(function(){t.status(200).end()})})}function s(e,t){l["default"].findOneAndUpdate({cuid:e.params.cuid},{$set:e.body.subm},{"new":!0}).populate("form").exec(function(e,n){return e?t.status(500).send(e):void t.json({subm:n})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getSubms=o,t.addSubm=u,t.getSubm=i,t.deleteSubm=a,t.updateSubm=s;var c=n(85),l=r(c),d=n(4),f=r(d),p=n(10),v=(r(p),n(11)),m=(r(v),n(3));r(m)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){a["default"].find().exec(function(e,n){return e?t.status(500).send(e):void t.json({SWTools:n})})}function u(e,t){a["default"].findOne({cuid:e.params.cuid}).exec(function(e,n){return e?t.status(500).send(e):void t.json({SWTool:n})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getSWTools=o,t.getSWTool=u;var i=n(17),a=r(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n=e.query.q;n=n.replace(/\+/g," "),s["default"].find({$text:{$search:n}},{score:{$meta:"textScore"}}).sort({score:{$meta:"textScore"}}).exec(function(e,n){return e?t.status(500).send(e):void t.json({SWTools:n})})}function u(e,t){var n=e.query.q;n="("+n.trim().replace(/\s+/g,"|")+")";var r=new RegExp(n,"i");s["default"].find({$or:[{name:r},{version:r},{company:r}]}).exec(function(e,n){return e?t.status(500).send(e):void t.json({SWTools:n})})}function i(e,t){var n=e.query.q,r="("+n.trim().replace(/\s+/g,"|")+")",o=new RegExp(r,"i");s["default"].find({$or:[{$text:{$search:n}},{name:o},{version:o},{company:o},{download_uri:o}]},{score:{$meta:"textScore"}}).sort({score:{$meta:"textScore"}}).exec(function(e,n){return e?t.status(500).send(e):void t.json({SWTools:n})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getSWToolsTextSearch=o,t.getSWToolsRegex=u,t.getSWTools=i;var a=n(17),s=r(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!e.files)return t.status(400).send("No files were uploaded.");console.log(e.files);var n=e.files.file,r=(0,c["default"])();n.mv(a["default"].join(p["default"].workDir,r),function(e){return e?t.status(500).send(e):void t.json({newFileName:r})})}function u(e,t){var n=JSON.stringify(e.body,null,2),r=(0,c["default"])();m["default"].writeFile(a["default"].join(p["default"].workDir,r+".json"),n,function(e){return e?t.status(500).send(e):void console.log("File has been created")}),t.json({data:n})}Object.defineProperty(t,"__esModule",{value:!0}),t.uploadFile=o,t.uploadData=u;var i=n(18),a=r(i),s=n(4),c=r(s),l=n(10),d=(r(l),n(11)),f=(r(d),n(3)),p=r(f),v=n(92),m=r(v)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),u=r(o),i=u["default"].Schema;"Post"in u["default"].connection.models&&delete u["default"].connection.models.Post;var a=new i({name:{type:"String",required:!0},title:{type:"String",required:!0},content:{type:"String",required:!0},slug:{type:"String",required:!0},cuid:{type:"String",required:!0},dateAdded:{type:"Date","default":Date.now,required:!0}});t["default"]=u["default"].model("Post",a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),u=r(o),i=u["default"].Schema;"Subm"in u["default"].connection.models&&delete u["default"].connection.models.Subm;var a=new i({data:{type:"Mixed",required:!0},form:{type:i.ObjectId,required:!0,ref:"Form"},slug:{type:"String",required:!0},cuid:{type:"String",required:!0},date_added:{type:"Date","default":Date.now,required:!0}});t["default"]=u["default"].model("Subm",a)},function(e,t){"use strict";function n(e,t){var n=[],r=function o(){var r=e.shift();return r?t(r).then(function(e){n.push(e)}).then(o):Promise.resolve(n)};return r()}Object.defineProperty(t,"__esModule",{value:!0}),t.sequence=n},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,r,o){var u=t&&t.defaultProps,i=arguments.length-3;if(n||0===i||(n={}),n&&u)for(var a in u)void 0===n[a]&&(n[a]=u[a]);else n||(n=u||{});if(1===i)n.children=o;else if(i>1){for(var s=Array(i),c=0;c<i;c++)s[c]=arguments[c+3];n.children=s}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),u=n(0),i=r(u),a=n(46),s=r(a),c=n(2),l=r(c),d=n(45),f=r(d),p=n(18),v=r(p),m=n(25),h=r(m),b=n(47),y=r(b),g=n(27),_=n(7),S=n(1),w=r(S),j=n(19),O=n(8),P=n(13),x=r(P),M=n(26),D=r(M),A=n(44),T=n(3),R=r(T),k=new i["default"];console.log(R["default"]),l["default"].Promise=global.Promise,l["default"].connect(R["default"].mongoURL,function(e){if(e)throw console.error("Please make sure Mongodb is installed and running!"),e;console.log("Connected to db");var t=function(e){n(28)(e).then(function(){return console.log("db filled with fictitious data when necessary")})["catch"](function(e){return console.log(e)})};t(!0)}),k.use((0,s["default"])()),k.use(f["default"].json({limit:"20mb"})),k.use(f["default"].urlencoded({limit:"20mb",extended:!1})),k.use(i["default"]["static"](v["default"].resolve(e,"../dist"))),k.use((0,y["default"])());var q="/api",E="/search-api";k.use(q,function(e,t,r){n(34)(e,t,r)}),k.use(q,function(e,t,r){n(31)(e,t,r)}),k.use(q,function(e,t,r){n(39)(e,t,r)}),k.use(q,function(e,t,r){n(43)(e,t,r)}),k.use(q,function(e,t,r){n(37)(e,t,r)}),k.use(q,function(e,t,r){n(35)(e,t,r)}),k.use(q,function(e,t,r){n(29)(e,t,r)}),k.use(q,function(e,t,r){n(40)(e,t,r)}),k.use(q,function(e,t,r){n(32)(e,t,r)}),k.use(E,function(e,t,r){n(38)(e,t,r)}),k.use(E,function(e,t,r){n(36)(e,t,r)}),k.use(E,function(e,t,r){n(30)(e,t,r)}),k.use(E,function(e,t,r){n(41)(e,t,r)}),k.use(E,function(e,t,r){n(33)(e,t,r)}),k.use("/test-hmr-api",function(e,t,r){n(42)(e,t,r)});var C=function(e,t){var n=x["default"].rewind(),r=process.env.webpackAssets&&JSON.parse(process.env.webpackAssets),o=process.env.webpackChunkAssets&&JSON.parse(process.env.webpackChunkAssets);return"\n    <!doctype html>\n    <html>\n      <head>\n        "+n.base.toString()+"\n        "+n.title.toString()+"\n        "+n.meta.toString()+"\n        "+n.link.toString()+"\n        "+n.script.toString()+"\n\n        "+("<link rel='stylesheet' href='"+r["/app.css"]+"' />")+'\n\n      </head>\n      <body>\n        <div id="root">'+e+"</div>\n        <script>\n          window.__INITIAL_STATE__ = "+JSON.stringify(t).replace(/</g,"\\u003c")+";\n          "+("//<![CDATA[\n          window.webpackManifest = "+JSON.stringify(o)+";\n          //]]>")+"\n        </script>\n        <script src='"+r["/vendor.js"]+"'></script>\n        <script src='"+r["/app.js"]+"'></script>\n      </body>\n    </html>\n  "},$=function(e){var t="";return C("Server Error"+t,{})};k.use(function(e,t,n){(0,O.match)({routes:D["default"],location:e.url},function(e,r,u){if(e)return t.status(500).end($(e));if(r)return t.redirect(302,r.pathname+r.search);if(!u)return n();var i=(0,g.configureStore)();return(0,A.fetchComponentData)(i,u.components,u.params).then(function(){var e=(0,j.renderToString)(o(_.Provider,{store:i},void 0,o(h["default"],{},void 0,w["default"].createElement(O.RouterContext,u)))),n=i.getState();t.set("Content-Type","text/html").status(200).end(C(e,n))})["catch"](function(e){return n(e)})})});k.listen(R["default"].port,function(e){e||console.log("SERVER is running on port: "+R["default"].port+"!")}),t["default"]=k}).call(t,"server")},function(e,t){e.exports={type:"object",properties:{researchers:{type:"array",title:"Researchers",items:{type:"object",properties:{id:{type:"string",title:"Id","default":""}}}},subjects:{type:"array",title:"Subjects",items:{type:"object",properties:{id:{type:"string",title:"Id","default":""}}}},devices:{type:"array",title:"Devices",items:{type:"object",properties:{id:{type:"string",title:"Id","default":""},role:{type:"string",title:"Role","default":""}}}},software:{type:"array",title:"Software",items:{type:"object",properties:{id:{type:"string",title:"Id","default":""}}}},other_resources:{type:"array",title:"Other resources",items:{type:"object",properties:{id:{type:"string",title:"Id","default":""}}}},outputs:{type:"array",title:"Outputs",items:{type:"object",properties:{name:{type:"string",title:"Name","default":""},uri:{type:"string",title:"File","default":""},metadata:{type:"array",title:"Meta-data",items:{type:"object",properties:{name:{type:"string",title:"Name","default":""},value:{type:"number",title:"Value","default":""},uom:{type:"string","enum":["mm","cm","m"],title:"Measurement unit","default":""}}}}}}}}}},function(e,t){e.exports={researchers:{items:{id:{"ui:widget":"researcher"}}},subjects:{items:{id:{"ui:widget":"subject"}}},devices:{items:{id:{"ui:widget":"device"}}},software:{items:{id:{"ui:widget":"software"}}},other_resources:{items:{id:{"ui:widget":"output"}}}}},function(e,t){e.exports=require("autobahn")},function(e,t){e.exports=require("chance")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("intl")},function(e,t){e.exports=require("intl-locales-supported")},function(e,t){e.exports=require("intl/locale-data/jsonp/en")},function(e,t){e.exports=require("intl/locale-data/jsonp/fr")},function(e,t){e.exports=require("react-addons-update")},function(e,t){e.exports=require("react-bootstrap")},function(e,t){e.exports=require("react-intl/locale-data/en")},function(e,t){e.exports=require("react-intl/locale-data/fr")},function(e,t){e.exports=require("redux-thunk")},,,,,,,,function(e,t){e.exports=require("react-select")},,,,,,,,,function(e,t){e.exports=require("react-jsonschema-form")}]);